{"version":3,"sources":["components/guidePreview.jsx","pages/Home.jsx","components/deleteButton.jsx","components/voteButtons.jsx","components/commentVoteButtons.jsx","components/ProfilePic.jsx","components/Comment.jsx","components/Authentication.jsx","components/CommentBox.jsx","pages/Guide.jsx","components/fileUpload.jsx","components/guideSectionCreator.jsx","pages/CreateGuide.jsx","components/loginForm.jsx","pages/LoginPage.jsx","components/signUpForm.jsx","pages/SignUpPage.jsx","components/guideSectionEditor.jsx","pages/EditGuide.jsx","pages/Board.jsx","components/ChatTools.jsx","components/ChatBox.jsx","pages/Profile.jsx","pages/Users.jsx","App.js","serviceWorker.js","index.js","tools.js"],"names":["GuidePreview","guide","props","url","video","videoThumbnail","getVidID","className","this","image","src","alt","title","author","description","role","aria-label","scoreUp","scoreDown","Component","Home","state","guides","document","getAll","fetch","then","res","json","data","setState","id","sort","a","b","aScore","filter","toLowerCase","includes","searchValue","trim","map","to","guideID","key","confirm","DeleteButton","history","useHistory","onClick","e","deleteGuide","token","jwtToken","window","push","go","target","innerHTML","prompt","VoteButtons","updateScores","formData","FormData","vote","voteType","classList","user","append","JSON","stringify","axios","post","upUsers","onVote","downUsers","CommentVoteButtons","comment","commentID","source","CancelToken","ProfilePic","getImage","username","cancelToken","defaultImage","test","Comment","body","parentID","hide","reply","deleted","pool","CognitoUserPool","UserPoolId","ClientId","auth","Username","Password","Promise","resolve","reject","CognitoUser","Pool","AuthenticationDetails","authenticateUser","onSuccess","onFailure","err","newPasswordRequired","session","getCurrentUser","getSession","getUserAttributes","att","Session","Attributes","logout","signOut","location","href","getUsername","email","catch","getUserDataFromEmail","getUserDataFromUsername","CommentBox","createCommentUrl","getCommentsUrl","deleteUrl","onAddComment","content","value","userComment","uploadComment","v4","updateComments","getElementById","boxID","onDelete","confirmDelete","userToken","permaDelete","comments","sortNew","reverse","onReply","bind","val","idToken","console","log","onChange","placeholder","_id","Guide","URLSearchParams","search","get","guideHead","guideSections","references","getSections","Value","length","scrollIntoView","behavior","videoId","section","index","array","submit","FileUpload","file","onChooseFile","evt","files","onUploadFile","name","handler","type","accept","guideSection","sectionID","CreateGuideSection","submitID","onSaveGuide","button","onAddSectionImg","prevState","Location","onNotSaved","rows","width","height","CreateGuide","style","display","onAddHeadImg","sectionIndex","addSection","LogInForm","password","loading","onSubmit","preventDefault","message","LoginPage","SignUpForm","userPool","invalid","signUp","Name","SignUpPage","Section","EditGuideSection","saved","unsaved","onDeleteSection","EditGuide","saveUrl","getUrl","onSectionNotSaved","onSectionSaved","Board","tools","require","ChatTools","roomID","currentUser","useState","messages","updateMessages","ref","useRef","useEffect","current","socketIOClient","query","on","incoming","isCurrentUser","senderID","newLog","saveChatLog","disconnect","send","emit","ChatBox","newMessage","updateSendMessage","messagesBottomRef","unshift","prevLogs","i","Profile","defaultUser","listen","getLogs","chatLog","onImageChange","action","setID","reload","getUserData","UsersPage","users","onSearch","App","homeLinks","pathname","path","render","Users","Hide","withRouter","Boolean","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister","error","cleanUrl","replace","split"],"mappings":"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","file":"static/js/main.9dd1dd94.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { getVidID } from \"../tools\";\r\n\r\n\r\nclass GuidePreview extends Component {\r\n  guide = this.props.guide;\r\n  url = this.guide.video;\r\n  videoThumbnail = (this.url ? (\"https://img.youtube.com/vi/\" + getVidID(this.url) + \"/0.jpg\") : \"\");\r\n\r\n    \r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"guidePreview\">\r\n        {!this.guide.image && this.url && (\r\n          <div className=\"guidePreviewImgBox\">\r\n            <img\r\n              className=\"guidePreviewImg\"\r\n              src={this.videoThumbnail}\r\n              alt={this.guide.title}\r\n            ></img>\r\n          </div>\r\n        )}\r\n        {this.guide.image && (\r\n          <div className=\"guidePreviewImgBox\">\r\n            <img\r\n              className=\"guidePreviewImg\"\r\n              src={this.guide.image}\r\n              alt={this.guide.title}\r\n            />\r\n          </div>\r\n        )}\r\n        <div className=\"guidePreviewContent\">\r\n          <div className=\"guidePreviewTitle\">{this.guide.title}</div>\r\n          <div className=\"guidePreviewAuthor\">{this.guide.author || \"Anonymous\"}</div>\r\n          <div className=\"guidePreviewDesc\">{this.guide.description}</div>\r\n          <div className=\"guidePreviewScore\"> <span role=\"img\" aria-label=\"up\">üëç</span>{this.guide.scoreUp || 0} /<span role=\"img\" aria-label=\"down\"> üëé</span>{this.guide.scoreDown || 0}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default GuidePreview;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport GuidePreview from \"../components/guidePreview\";\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      guides: [],\r\n    };\r\n  }\r\n  url = \"\";\r\n\r\n  componentDidMount() {\r\n    document.title = \"Gu√≠a\"\r\n\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/getAll\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getAll\";\r\n    }\r\n    // console.log(this.url)\r\n    this.getAll();\r\n  }\r\n\r\n  getAll() {\r\n    // console.log(url)\r\n    fetch(this.url)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        // console.log(data);\r\n        this.setState({\r\n          guides: data,\r\n        });\r\n        // console.log(this.state.guides);\r\n      });\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"homePage\">\r\n\r\n        <div id=\"homeGuideContainer\">\r\n          {this.state.guides\r\n            .sort((a, b) => {\r\n              let aScore = a.scoreUp - a.scoreDown;\r\n              let bScore = b.scoreUp - b.scoreDown;\r\n              return bScore - aScore;\r\n            })\r\n            .filter((guide) => {\r\n              return guide.title\r\n                .toLowerCase()\r\n                .includes(this.props.searchValue.toLowerCase().trim());\r\n            })\r\n            .map((guide) => (\r\n              <Link to={\"/guide?guideID=\" + guide.guideID} key={guide.guideID}>\r\n                <GuidePreview guide={guide} />\r\n              </Link>\r\n            ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { deleteGuide } from \"../tools\";\r\n\r\nlet confirm = false;\r\n\r\nconst DeleteButton = (props) => {\r\n  let history = useHistory();\r\n  function onDelete(e) {\r\n    if (confirm) {\r\n      deleteGuide(props.id, props.token.jwtToken, window);\r\n      history.push(\"/\");\r\n      history.go();\r\n      confirm = false;\r\n    } else {\r\n      e.target.innerHTML = \"Confirm Delete\";\r\n      confirm = true;\r\n    }\r\n    // console.log(props.id)\r\n  }\r\n\r\n  return (\r\n    <div className=\"deleteButton\" onClick={onDelete}>\r\n        {props.prompt ? props.prompt : \"Delete Guide\"}\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default DeleteButton;\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nclass VoteButtons extends Component {\r\n  url = \"\";\r\n  state = {\r\n    guide: this.props.guide,\r\n    scoreUp: 0,\r\n    scoreDown: 0,\r\n  };\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/voteGuide\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/voteGuide\";\r\n    }\r\n    // console.log(this.url);\r\n    this.updateScores(this.state.guide);\r\n  }\r\n\r\n  onVote(e) {\r\n    let formData = new FormData();\r\n    let vote = {\r\n      guideID: this.state.guide.guideID,\r\n      voteType: e.target.classList[0],\r\n      user: this.props.user,\r\n    };\r\n    // console.log(vote);\r\n    formData.append(\"file\", JSON.stringify(vote));\r\n    axios.post(this.url, formData).then((res) => {\r\n      //   console.log(res);\r\n      this.setState({\r\n        guide: res.data,\r\n      });\r\n      this.updateScores(res.data);\r\n      //   this.forceUpdate();\r\n    });\r\n  }\r\n\r\n  updateScores(guide) {\r\n    this.setState({\r\n      scoreUp: guide.scoreUp,\r\n      scoreDown: guide.scoreDown,\r\n    });\r\n    // console.log(guide.scoreUp,guide.scoreDown,this.state)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"guideVoteButtons\">\r\n        <div\r\n          className={\r\n            this.state.guide.upUsers.includes(this.props.user)\r\n              ? \"guideUpvote voted\"\r\n              : \"guideUpvote\"\r\n          }\r\n        >\r\n          <span\r\n            role=\"img\"\r\n            aria-label=\"up\"\r\n            className=\"up\"\r\n            onClick={(e) => this.onVote(e)}\r\n          >\r\n            üëç\r\n            {this.state.scoreUp || 0}\r\n          </span>\r\n        </div>\r\n        <div\r\n          className={\r\n            this.state.guide.downUsers.includes(this.props.user)\r\n              ? \"guideDownvote voted\"\r\n              : \"guideDownvote\"\r\n          }\r\n        >\r\n          <span\r\n            role=\"img\"\r\n            aria-label=\"down\"\r\n            className=\"down\"\r\n            onClick={(e) => this.onVote(e)}\r\n          >\r\n            üëé\r\n            {this.state.guide.scoreDown || 0}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default VoteButtons;\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nclass CommentVoteButtons extends Component {\r\n  url = \"\";\r\n  state = {\r\n    comment: this.props.comment,\r\n    scoreUp: 0,\r\n    scoreDown: 0,\r\n  };\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/voteComment\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/voteComment\";\r\n    }\r\n    // console.log(this.url);\r\n    this.updateScores(this.state.comment);\r\n  }\r\n\r\n  onVote(e) {\r\n    let formData = new FormData();\r\n    let vote = {\r\n      commentID: this.state.comment.commentID,\r\n      voteType: e.target.classList[0],\r\n      user: this.props.user,\r\n    };\r\n    // console.log(vote);\r\n    formData.append(\"file\", JSON.stringify(vote));\r\n    axios.post(this.url, formData).then((res) => {\r\n      // console.log(res.data);\r\n      this.setState({\r\n        comment: res.data,\r\n        scoreUp: res.data.scoreUp,\r\n        scoreDown: res.data.scoreDown,\r\n      });\r\n      this.updateScores(res.data);\r\n      //   this.forceUpdate();\r\n    });\r\n  }\r\n\r\n  updateScores(comment) {\r\n    this.setState({\r\n      scoreUp: comment.scoreUp,\r\n      scoreDown: comment.scoreDown,\r\n    });\r\n    // console.log(this.state.comment.upUsers,this.state.comment.downUsers)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"guideVoteButtons\">\r\n        <div\r\n          className={\r\n            this.state.comment.upUsers.includes(this.props.user)\r\n              ? \"guideUpvote voted\"\r\n              : \"guideUpvote\"\r\n          }\r\n        >\r\n          <span\r\n            role=\"img\"\r\n            aria-label=\"up\"\r\n            className=\"up\"\r\n            onClick={(e) => this.onVote(e)}\r\n          >\r\n            üëç\r\n            {this.state.scoreUp || 0}\r\n          </span>\r\n        </div>\r\n        <div\r\n          className={\r\n            this.state.comment.downUsers.includes(this.props.user)\r\n              ? \"guideDownvote voted\"\r\n              : \"guideDownvote\"\r\n          }\r\n        >\r\n          <span\r\n            role=\"img\"\r\n            aria-label=\"down\"\r\n            className=\"down\"\r\n            onClick={(e) => this.onVote(e)}\r\n          >\r\n            üëé\r\n            {this.state.scoreDown || 0}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default CommentVoteButtons;\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\n// import { Link } from \"react-router-dom\";\r\n// import { session, getUserData } from \"../components/Authentication\";\r\nconst cancelToken = axios.CancelToken;\r\nconst source = cancelToken.source();\r\n\r\n\r\n// const \r\n\r\n\r\nclass ProfilePic extends Component {\r\n  url = \"\";\r\n  state = {\r\n    image: \"\",\r\n  };\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/getUserImage\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUserImage\";\r\n    }\r\n    this.getImage();\r\n    if (this.props.test) {\r\n      // console.log(this.props.username);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // source.cancel();\r\n  }\r\n\r\n  getImage = () => {\r\n    if (this.props.username) {\r\n      let formData = new FormData();\r\n      formData.append(\"file\", JSON.stringify(this.props.username));\r\n      axios\r\n        .post(this.url, formData, {\r\n          cancelToken: source.token,\r\n        })\r\n        .then((res) => {\r\n          this.setState({\r\n            image: res.data\r\n              ? res.data.image\r\n              : \"https://guia-images.s3-us-west-1.amazonaws.com/Full-Green-Tree-984x1024.png\",\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  defaultImage =\r\n    \"https://guia-images.s3-us-west-1.amazonaws.com/Full-Green-Tree-984x1024.png\";\r\n\r\n  render() {\r\n    return this.props.username !== \"[Deleted]\" ? (\r\n      <Link to={\"/profile?user=\" + this.props.username}>\r\n        <div className=\"profilePic\">\r\n          <img\r\n            src={this.state.image || this.defaultImage}\r\n            className=\"userImage\"\r\n            alt={this.props.username}\r\n            onClick={this.getImage}\r\n          ></img>\r\n          <div className=\"profilePicUsername\">{this.props.username}</div>\r\n        </div>\r\n      </Link>\r\n    ) : (\r\n      <div className=\"profilePic\">\r\n        <img\r\n          src={this.state.image || this.defaultImage}\r\n          className=\"userImage\"\r\n          alt={this.props.username}\r\n          onClick={this.getImage}\r\n        ></img>\r\n        <div className=\"profilePicUsername\">{this.props.username}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProfilePic;\r\n","import React, { Component } from \"react\";\r\nimport CommentBox from \"../components/CommentBox\";\r\nimport CommentVoteButtons from \"./commentVoteButtons\";\r\nimport ProfilePic from \"./ProfilePic\";\r\n\r\nclass Comment extends Component {\r\n  comment = this.props.comment;\r\n  render() {\r\n    return (\r\n      <div className=\"comment\">\r\n      <div className=\"commentHead\">\r\n      <ProfilePic username={this.comment.author} />\r\n      </div>\r\n        <div className=\"commentBody\">{this.comment.body}</div>\r\n        {this.comment.author === \"[Deleted]\" ? (\r\n          \"\"\r\n        ) : (\r\n          <div className=\"commentInteractions\">\r\n          {this.props.user?(\r\n\r\n            <CommentVoteButtons\r\n              comment={this.comment}\r\n              user={this.props.username}\r\n            />\r\n          ): ( <div className=\"guideVoteButtons\">\r\n              <div>\r\n                <span role=\"img\" aria-label=\"up\" className=\"up\">\r\n                  üëç\r\n                  {this.props.comment.scoreUp || 0}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <span role=\"img\" aria-label=\"down\" className=\"down\">\r\n                  üëé\r\n                  {this.props.comment.scoreDown || 0}\r\n                </span>\r\n              </div>\r\n            </div>)}\r\n          </div>\r\n        )}\r\n        <CommentBox\r\n          parentID={this.comment.commentID}\r\n          user={this.props.user}\r\n          username={this.props.username}\r\n          hide={true}\r\n          reply={true}\r\n          deleted = {this.comment.author === \"[Deleted]\"}\r\n          prompt=\"Leave a reply\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Comment;\r\n","import {\r\n  CognitoUser,\r\n  AuthenticationDetails,\r\n  CognitoUserPool,\r\n} from \"amazon-cognito-identity-js\";\r\nimport axios from \"axios\";\r\n\r\nconst pool = new CognitoUserPool({\r\n  UserPoolId: \"us-east-2_r9mOSgn28\",\r\n  ClientId: \"4id2vq725vkn530cdcj355d0dt\",\r\n});\r\n\r\nconst auth = async (Username, Password) =>\r\n  await new Promise((resolve, reject) => {\r\n    const user = new CognitoUser({\r\n      Username,\r\n      Pool: pool,\r\n    });\r\n    const auth = new AuthenticationDetails({\r\n      Username,\r\n      Password,\r\n    });\r\n\r\n    user.authenticateUser(auth, {\r\n      onSuccess: (data) => {\r\n        resolve(data);\r\n      },\r\n      onFailure: (err) => {\r\n        reject(err);\r\n      },\r\n      newPasswordRequired: (data) => {\r\n        resolve(data);\r\n      },\r\n    });\r\n  });\r\n\r\nconst session = async () =>\r\n  await new Promise((resolve, reject) => {\r\n    const user = pool.getCurrentUser();\r\n    if (user) {\r\n      user.getSession((err, session) => {\r\n        if (err) {\r\n          reject(err);\r\n        } else {\r\n          user.getUserAttributes((err, att) => {\r\n            if (err) {\r\n              reject(err);\r\n            } else {\r\n              resolve({ Session: session, Attributes: att });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      reject();\r\n    }\r\n  });\r\n\r\nconst logout = () => {\r\n  const user = pool.getCurrentUser();\r\n  if (user) {\r\n    user.signOut();\r\n    window.location.href = \"/\";\r\n  }\r\n};\r\n\r\nconst getUsername = async (email) =>\r\n  await new Promise((resolve, reject) => {\r\n    let url = \"\";\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      url = \"http://localhost:8080/getUser\";\r\n    } else {\r\n      url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUser\";\r\n    }\r\n\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify({ email: email }));\r\n\r\n    axios\r\n      .post(url, formData)\r\n      .then((res) => {\r\n        let username = res.data.username;\r\n        // console.log(username);\r\n        resolve(username);\r\n      })\r\n      .catch((err) => reject(err));\r\n  });\r\n\r\nconst getUserDataFromEmail = async (email) =>\r\n  await new Promise((resolve, reject) => {\r\n    let url = \"\";\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      url = \"http://localhost:8080/getUser\";\r\n    } else {\r\n      url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUser\";\r\n    }\r\n\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify({ email: email }));\r\n\r\n    axios\r\n      .post(url, formData)\r\n      .then((res) => {\r\n        resolve(res.data);\r\n      })\r\n      .catch((err) => reject(err));\r\n  });\r\n\r\nconst getUserDataFromUsername = async (username) =>\r\n  await new Promise((resolve, reject) => {\r\n    let url = \"\";\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      url = \"http://localhost:8080/getUserFromName\";\r\n    } else {\r\n      url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUserFromName\";\r\n    }\r\n\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify({ username: username }));\r\n\r\n    axios\r\n      .post(url, formData)\r\n      .then((res) => {\r\n        resolve(res.data);\r\n      })\r\n      .catch((err) => reject(err));\r\n  });\r\n\r\nexport {\r\n  auth,\r\n  session,\r\n  logout,\r\n  getUsername,\r\n  getUserDataFromEmail,\r\n  getUserDataFromUsername,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport Comment from \"./Comment\";\r\nimport axios from \"axios\";\r\nimport { v4 } from \"uuid\";\r\nimport { session } from \"./Authentication\";\r\n\r\nconst cancelToken = axios.CancelToken;\r\nconst source = cancelToken.source();\r\n\r\nclass CommentBox extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      // box: {},\r\n      boxID: v4(),\r\n      comments: [],\r\n      userComment: \"\",\r\n      hide: this.props.hide,\r\n      confirmDelete: false,\r\n      searchValue: \"\",\r\n      userToken: \"\",\r\n    };\r\n    this.onReply = this.onReply.bind(this);\r\n    //   this.onDelete = this.onDelete.bind(this)\r\n  }\r\n\r\n  createCommentUrl = \"\";\r\n  getCommentsUrl = \"\";\r\n  deleteUrl = \"\";\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.createCommentUrl = \"http://localhost:8080/uploadComment\";\r\n      this.deleteUrl = \"http://localhost:8080/deleteComment\";\r\n      this.getCommentsUrl = \"http://localhost:8080/getComments\";\r\n    } else {\r\n      this.createCommentUrl =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadComment\";\r\n      this.deleteUrl =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/deleteComment\";\r\n      this.getCommentsUrl =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getComments\";\r\n    }\r\n    // console.log(\"mounting\");\r\n    this.updateComments();\r\n    if (this.props.permaDelete) {\r\n      // console.log(\"Box      ----->\", this.props.searchValue);\r\n      this.setState({\r\n        searchValue: this.props.searchValue ? this.props.searchValue : \"\",\r\n      });\r\n    }\r\n    session()\r\n      .then((val) => {\r\n        if (val) {\r\n          let  token  = val.Session.idToken;\r\n          this.setState({\r\n            userToken: token,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // source.cancel();\r\n  }\r\n  onAddComment = (e) => {\r\n    let content = e.target.value;\r\n    this.setState({\r\n      userComment: content,\r\n    });\r\n  };\r\n\r\n  uploadComment = () => {\r\n    let formData = new FormData();\r\n    formData.append(\r\n      \"file\",\r\n      JSON.stringify({\r\n        parentID: this.props.parentID,\r\n        commentID: v4(),\r\n        author: this.props.username,\r\n        body: this.state.userComment,\r\n      })\r\n    );\r\n    axios\r\n      .post(this.createCommentUrl, formData, {\r\n        cancelToken: source.token,\r\n      })\r\n      .then((res) => {\r\n        this.updateComments();\r\n        document.getElementById(this.state.boxID).value = \"\";\r\n      });\r\n  };\r\n\r\n  onDelete = (e) => {\r\n    if (this.state.confirmDelete) {\r\n      let formData = new FormData();\r\n      formData.append(\r\n        \"file\",\r\n        JSON.stringify({\r\n          parentID: this.props.parentID,\r\n          commentID: e.target.id,\r\n          author: \"[Deleted]\",\r\n          body: \"[Deleted]\",\r\n          token:this.state.userToken.jwtToken,\r\n          // scoreDown: -1000,\r\n        })\r\n      );\r\n      // console.log(this.props.permaDelete);\r\n      if (this.props.permaDelete) {\r\n        axios\r\n          .post(this.deleteUrl, formData, {\r\n            cancelToken: source.token,\r\n          })\r\n          .then((res) => {\r\n            //   console.log(\"delete\");\r\n            this.updateComments();\r\n          });\r\n      } else {\r\n        axios\r\n          .post(this.createCommentUrl, formData, {\r\n            cancelToken: source.token,\r\n          })\r\n          .then((res) => {\r\n            //   console.log(\"delete\");\r\n            this.updateComments();\r\n          });\r\n      }\r\n      this.setState({\r\n        confirmDelete: false,\r\n      });\r\n    } else {\r\n      e.target.innerHTML = \"Confirm Delete\";\r\n      e.target.classList = \"deleteComment confirm\";\r\n      this.setState({\r\n        confirmDelete: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  updateComments = () => {\r\n    let formData = new FormData();\r\n    formData.append(\r\n      \"file\",\r\n      JSON.stringify({\r\n        parentID: this.props.parentID,\r\n      })\r\n    );\r\n    axios\r\n      .post(this.getCommentsUrl, formData, {\r\n        cancelToken: source.token,\r\n      })\r\n      .then((res) => {\r\n        this.setState(\r\n          {\r\n            comments: [],\r\n            hide: this.props.hide,\r\n          },\r\n          () => {\r\n            this.setState({\r\n              comments: this.props.sortNew ? res.data.reverse() : res.data,\r\n              hide: this.props.hide,\r\n            });\r\n          }\r\n        );\r\n      })\r\n      .catch((err) => {});\r\n  };\r\n\r\n  onReply() {\r\n    this.setState({\r\n      hide: false,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"commentBox\">\r\n        {this.props.user && !this.state.hide ? (\r\n          <div className=\"commentInput\">\r\n            <textarea\r\n              onChange={this.onAddComment}\r\n              className=\"commentTextArea\"\r\n              placeholder={this.props.prompt}\r\n              id={this.state.boxID}\r\n            />\r\n            <div className=\"commentButton\" onClick={this.uploadComment}>\r\n              Submit\r\n            </div>\r\n          </div>\r\n        ) : this.props.user && !this.props.deleted ? (\r\n          <div\r\n            className=\"replyButton\"\r\n            id={\"reply\" + this.state.boxID}\r\n            onClick={this.onReply}\r\n          >\r\n            Reply\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        <div className={this.props.reply ? \"comments replies\" : \"comments\"}>\r\n          {this.props.sortNew\r\n            ? this.state.comments.map((comment) => (\r\n                <div key={comment._id} className=\"commentContainer\">\r\n                  {this.props.username === comment.author ? (\r\n                    <div\r\n                      className=\"deleteComment\"\r\n                      id={comment.commentID}\r\n                      onClick={this.onDelete}\r\n                    >\r\n                      ‚úñ\r\n                    </div>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                  <Comment comment={comment} {...this.props} />\r\n                </div>\r\n              ))\r\n            : this.state.comments\r\n                .filter((comment) => {\r\n                  return comment.body\r\n                    .toLowerCase()\r\n                    .includes(this.state.searchValue.toLowerCase().trim());\r\n                })\r\n                .sort((a, b) => {\r\n                  let aScore = a.scoreUp - a.scoreDown;\r\n                  let bScore = b.scoreUp - b.scoreDown;\r\n                  return bScore - aScore;\r\n                })\r\n                .map((comment) => (\r\n                  <div key={comment._id} className=\"commentContainer\">\r\n                    {this.props.username === comment.author ? (\r\n                      <div\r\n                        className=\"deleteComment\"\r\n                        id={comment.commentID}\r\n                        onClick={this.onDelete}\r\n                      >\r\n                        ‚úñ\r\n                      </div>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                    <Comment comment={comment} {...this.props} />\r\n                  </div>\r\n                ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default CommentBox;\r\n","import React, { Component } from \"react\";\r\nimport YouTube from \"react-youtube\";\r\nimport DeleteButton from \"../components/deleteButton\";\r\nimport VoteButtons from \"../components/voteButtons\";\r\nimport CommentBox from \"../components/CommentBox\";\r\nimport { session, getUserDataFromEmail } from \"../components/Authentication\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ProfilePic from \"../components/ProfilePic\";\r\nimport { getVidID } from \"../tools\";\r\n\r\nclass Guide extends Component {\r\n  id = new URLSearchParams(this.props.location.search).get(\"guideID\");\r\n  url = \"\";\r\n\r\n  state = {\r\n    guideHead: {},\r\n    guideSections: [],\r\n    user: false,\r\n    username: \"\",\r\n    image: \"\",\r\n    userToken: \"\",\r\n    references: [],\r\n  };\r\n\r\n  getSections() {\r\n    // console.log(this.url);\r\n    fetch(this.url)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        // console.log(data);\r\n        this.setState({\r\n          guideHead: data[0],\r\n          guideSections: data[1],\r\n        });\r\n        document.title = this.state.guideHead.title;\r\n        // console.log(this.state);\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/getGuide?guideId=\" + this.id;\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getGuide?guideId=\" +\r\n        this.id;\r\n    }\r\n    // console.log(this.url)\r\n    // console.log(this.props.history)\r\n    this.getSections();\r\n    session()\r\n      .then((val) => {\r\n        if (val) {\r\n          let { Value } = val.Attributes[2];\r\n          let token = val.Session.idToken;\r\n          getUserDataFromEmail(Value).then((data) => {\r\n            this.setState({\r\n              username: data.username,\r\n              user: true,\r\n              image: data.image,\r\n              userToken: token,\r\n            });\r\n            // console.log(this.state.username);\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"guide\">\r\n        <div id=\"guideHead\">\r\n          {this.state.user &&\r\n          this.state.username === this.state.guideHead.author ? (\r\n            <div className=\"selfButtons\">\r\n              <Link to={\"/edit?guideID=\" + this.id}>\r\n                <div className=\"editButton\">Edit Guide</div>\r\n              </Link>\r\n\r\n              <DeleteButton id={this.id} token={this.state.userToken} />\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <div id=\"guideTitle\">{this.state.guideHead.title}</div>\r\n          <div id=\"guideAuthor\">\r\n            <ProfilePic\r\n              username={this.state.guideHead.author}\r\n              test={true}\r\n              key={this.state.guideHead.author}\r\n            />\r\n          </div>\r\n          {this.state.user ? (\r\n            <VoteButtons\r\n              guide={this.state.guideHead}\r\n              user={this.state.username}\r\n            />\r\n          ) : (\r\n            <div className=\"guideVoteButtons\">\r\n              <div>\r\n                <span role=\"img\" aria-label=\"up\" className=\"up\">\r\n                  üëç\r\n                  {this.state.guideHead.scoreUp || 0}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <span role=\"img\" aria-label=\"down\" className=\"down\">\r\n                  üëé\r\n                  {this.state.guideHead.scoreDown || 0}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {this.state.guideSections.length > 0 &&\r\n          this.state.username !== this.state.guideHead.author ? (\r\n            <div\r\n              className=\"nextButton\"\r\n              onClick={() => {\r\n                // console.log( document.getElementById(this.state.guideSections[0]._id));\r\n                document\r\n                  .getElementById(this.state.guideSections[0]._id)\r\n                  .scrollIntoView({ behavior: \"smooth\" });\r\n              }}\r\n            >\r\n              Next Step\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {!this.state.guideHead.image && this.state.guideHead.video && (\r\n            <YouTube\r\n              id=\"guideHeadVideo\"\r\n              videoId={getVidID(this.state.guideHead.video)}\r\n            ></YouTube>\r\n          )}\r\n          {this.state.guideHead.image && (\r\n            <img\r\n              id=\"guideHeadImg\"\r\n              src={this.state.guideHead.image}\r\n              alt={this.state.guideHead.title}\r\n            />\r\n          )}\r\n\r\n          <div id=\"guideHeadDesc\">{this.state.guideHead.description}</div>\r\n\r\n        </div>\r\n\r\n        <div id=\"guideSectionContainer\">\r\n          {this.state.guideSections.map((section, index, array) => (\r\n            <div className=\"guideSection\" key={section._id} id={section._id}>\r\n              <div className=\"guideSectionTitle\">{section.title}</div>\r\n              {index < array.length - 1 ? (\r\n                <div\r\n                  className=\"nextButton\"\r\n                  onClick={() => {\r\n                    // console.log( document.getElementById(array[index+1]._id));\r\n                    document\r\n                      .getElementById(array[index + 1]._id)\r\n                      .scrollIntoView({ behavior: \"smooth\" });\r\n                  }}\r\n                >\r\n                  Next Step\r\n                </div>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              {!section.image && section.video && (\r\n                <YouTube\r\n                  className=\"guideSectionVideo\"\r\n                  videoId={getVidID(section.video)}\r\n                ></YouTube>\r\n              )}\r\n              {section.image && (\r\n                <img\r\n                  className=\"guideSectionImg\"\r\n                  src={section.image}\r\n                  alt={section.title}\r\n                />\r\n              )}\r\n\r\n              <div className=\"guideSectionDesc\">{section.description}</div>\r\n              \r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"guideComments\">\r\n          <CommentBox\r\n            parentID={this.id}\r\n            user={this.state.user}\r\n            username={this.state.username}\r\n            hide={false}\r\n            submit={false}\r\n            prompt=\"Leave a comment\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Guide;\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { v4 } from \"uuid\";\r\n\r\n\r\nclass FileUpload extends Component {\r\n  url=\"\";\r\n  componentDidMount(){\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n      this.url = \"http://localhost:8080/uploadImage\";\r\n      } else {\r\n        this.url = \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadImage\";\r\n      }\r\n  }\r\n  \r\n  state = {\r\n    file: null,\r\n    id:v4()\r\n  };\r\n\r\n  onChooseFile = (evt) => {\r\n    this.setState({\r\n      file: evt.target.files[0],\r\n    });\r\n    document.getElementById(this.state.id).classList = \"unsavedButton\"\r\n    document.getElementById(this.state.id).innerHTML = \"Save Image\"\r\n  };\r\n  \r\n  onUploadFile = () => {\r\n    let file = new FormData();\r\n    file.append(\"file\",this.state.file,this.state.file.name)\r\n    axios.post(this.url,file).then(res=>{\r\n      this.props.handler(res);\r\n      document.getElementById(this.state.id).classList = \"saveFileButton\"\r\n    document.getElementById(this.state.id).innerHTML = \"Image Saved\"\r\n    });\r\n  };\r\n\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"fileUpload\">\r\n        <input type=\"file\" accept=\"image/*\" onChange = {this.onChooseFile}></input>\r\n        <div className=\"saveFileButton\" onClick={this.onUploadFile} id={this.state.id}>Save Image</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default FileUpload;\r\n","import React, { Component } from \"react\";\r\nimport FileUpload from \"../components/fileUpload\";\r\nimport axios from \"axios\";\r\nimport { v4 } from \"uuid\";\r\n\r\nclass guideSection {\r\n  constructor(id) {\r\n    this.guideID = id;\r\n    this.sectionID = v4();\r\n    this.title = null;\r\n    this.description = null;\r\n    this.image = null;\r\n    this.video = null;\r\n  }\r\n}\r\n\r\nclass CreateGuideSection extends Component {\r\n  url = \"\";\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/uploadGuideSection\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideSection\";\r\n    }\r\n  }\r\n  state = {\r\n    guideSection: new guideSection(this.props.guideID),\r\n    submitID: v4(),\r\n  };\r\n\r\n  onSaveGuide = () => {\r\n    let button = document.getElementById(this.state.submitID);\r\n    button.innerHTML = \"Saving....\"\r\n    // console.log(this.state.guideSection);\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify(this.state.guideSection));\r\n    axios.post(this.url, formData).then((res) => {\r\n      button.classList = \"saveButton\";\r\n      button.innerHTML = \"Saved\";\r\n    });\r\n  };\r\n\r\n  onAddSectionImg = (res) => {\r\n    this.setState((prevState) => ({\r\n      guideSection: {\r\n        ...prevState.guideSection,\r\n        image: res.data.Location,\r\n      },\r\n    }));\r\n\r\n    // console.log(this.state.guideSection);\r\n  };\r\n\r\n  onNotSaved = () => {\r\n    let button = document.getElementById(this.state.submitID);\r\n    button.classList = \"unsavedButton\";\r\n    button.innerHTML = \"Save Changes\";\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"guideCreatorSection\">\r\n        <div className=\"guideSectionCreatorLabel\">Add Section Title</div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"guideCreatorSectionInput\"\r\n          placeholder=\"Section Title\"\r\n          onChange={(e) => {\r\n            let title = e.target.value;\r\n            this.setState((prevState) => ({\r\n              guideSection: {\r\n                ...prevState.guideSection,\r\n                title: title,\r\n              },\r\n            }));\r\n            this.onNotSaved();\r\n          }}\r\n        ></input>\r\n        <div className=\"guideSectionCreatorLabel\">Add Section Description</div>\r\n        <textarea\r\n          type=\"text\"\r\n          className=\"guideCreatorSectionInput\"\r\n          placeholder=\"Description\"\r\n          rows=\"10\"\r\n          onChange={(e) => {\r\n            let description = e.target.value;\r\n            this.setState((prevState) => ({\r\n              guideSection: {\r\n                ...prevState.guideSection,\r\n                description: description,\r\n              },\r\n            }));\r\n            this.onNotSaved();\r\n          }}\r\n        ></textarea>\r\n        <div className=\"guideCreatorSectionAddImage\">\r\n          <div className=\"guideSectionCreatorLabel\">[Optional] Add Image</div>\r\n          {this.state.guideSection.image ? <img\r\n              className=\"guideCreatorSectionAddImagePreview\"\r\n              src={this.state.guideSection.image}\r\n              width=\"100px\"\r\n              height=\"100px\"\r\n              alt=\"Preview\"\r\n            ></img> : \"\"}\r\n          <FileUpload handler={this.onAddSectionImg} />\r\n\r\n          <div className=\"guideSectionCreatorLabel\">[Optional] Add Video (takes place of image)</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"guideCreatorSectionInput\"\r\n            placeholder=\"Youtube URL\"\r\n            onChange={(e) => {\r\n              let url = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideSection: {\r\n                  ...prevState.guideSection,\r\n                  video: url,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></input>\r\n\r\n        </div>\r\n        <div\r\n          className=\"saveButton\"\r\n          id={this.state.submitID}\r\n          onClick={this.onSaveGuide}\r\n        >\r\n          Section Saved\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default CreateGuideSection;\r\n","import { v4 } from \"uuid\";\r\nimport React, { Component } from \"react\";\r\nimport FileUpload from \"../components/fileUpload\";\r\nimport CreateGuideSection from \"../components/guideSectionCreator\";\r\nimport axios from \"axios\";\r\nimport { session, getUsername } from \"../components/Authentication\";\r\n\r\nlet user = \"\";\r\nsession()\r\n  .then((val) => {\r\n    if (val) {\r\n      let { Value } = val.Attributes[2];\r\n      getUsername(Value).then((data) => {\r\n        user = data;\r\n      });\r\n    }\r\n  })\r\n  .catch((err) => console.log(err));\r\n\r\nclass guideHead {\r\n  constructor() {\r\n    this.guideID = v4();\r\n    this.author = user;\r\n    this.title = \"\";\r\n    this.description = \"\";\r\n    this.image = \"\";\r\n    this.video = \"\";\r\n    this.scoreUp = 0;\r\n    this.scoreDown = 0;\r\n  }\r\n}\r\n\r\nclass CreateGuide extends Component {\r\n  state = {\r\n    guideHead: new guideHead(),\r\n    guideSections: [],\r\n  };\r\n\r\n  url = \"\";\r\n  componentDidMount() {\r\n    document.title = \"Create Guide\"\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/uploadGuideHead\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideHead\";\r\n    }\r\n    session()\r\n  .then((val) => {\r\n    if (val) {\r\n      let { Value } = val.Attributes[2];\r\n      getUsername(Value).then((data) => {\r\n        user = data;\r\n        console.log(user)\r\n        this.setState((prevState) => ({\r\n          guideHead: {\r\n            ...prevState.guideHead,\r\n            author: user,\r\n          },\r\n        }));\r\n      });\r\n    }\r\n  })\r\n  .catch((err) => console.log(err));\r\n  }\r\n\r\n  onSaveGuide = () => {\r\n    console.log(this.state.guideHead.author)\r\n    \r\n    let button = document.getElementById(\"saveHeadButton\");\r\n    button.innerHTML = \"Saving....\"\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify(this.state.guideHead));\r\n    axios.post(this.url, formData).then((res) => {\r\n      button.classList = \"saveButton\";\r\n      button.innerHTML = \"Section Saved\";\r\n      document.getElementById(\"addSectionButtonHead\").style.display = \"block\";\r\n      document.getElementById(\"saveToolTip\").style.display = \"none\";\r\n    });\r\n  };\r\n\r\n  onAddHeadImg = (res) => {\r\n    this.setState((prevState) => ({\r\n      guideHead: {\r\n        ...prevState.guideHead,\r\n        image: res.data.Location,\r\n      },\r\n    }));\r\n\r\n    // console.log(this.state.guideHead);\r\n  };\r\n\r\n  onNotSaved = () => {\r\n    let button = document.getElementById(\"saveHeadButton\");\r\n    button.classList = \"unsavedButton\";\r\n    button.innerHTML = \"Save Changes\";\r\n  };\r\n\r\n  sectionIndex = 0;\r\n  addSection = () => {\r\n    this.setState((prevState) => ({\r\n      guideHead: {\r\n        ...prevState.guideHead,\r\n      },\r\n      guideSections: [\r\n        ...prevState.guideSections,\r\n        { key: this.sectionIndex, guideID: this.state.guideHead.guideID },\r\n      ],\r\n    }));\r\n    this.sectionIndex++;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"guideCreator\">\r\n        {/* <div className=\"id\">{this.state.guideHead.guideID}</div> */}\r\n        <div id=\"guideCreatorHead\">\r\n          <div className=\"guideCreatorLabel\">Add Title</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"guideCreatorHeadInput\"\r\n            placeholder=\"Title\"\r\n            onChange={(e) => {\r\n              // console.log(this.state.guideHead.author);\r\n              let title = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideHead: {\r\n                  ...prevState.guideHead,\r\n                  title: title,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></input>\r\n          <div className=\"guideCreatorLabel\">Add Description</div>\r\n          <textarea\r\n            type=\"text\"\r\n            className=\"guideCreatorHeadInput\"\r\n            placeholder=\"Description\"\r\n            rows=\"10\"\r\n            onChange={(e) => {\r\n              let description = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideHead: {\r\n                  ...prevState.guideHead,\r\n                  description: description,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></textarea>\r\n          <div className=\"guideCreatorHeadAddImage\">\r\n            <div className=\"guideCreatorLabel\">[Optional] Add Image</div>\r\n            {this.state.guideHead.image ? (\r\n              <img\r\n                className=\"guideCreatorHeadAddImagePreview\"\r\n                src={this.state.guideHead.image}\r\n                width=\"100px\"\r\n                height=\"100px\"\r\n                alt=\"Preview\"\r\n              ></img>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <FileUpload handler={this.onAddHeadImg} />\r\n            <div className=\"guideCreatorLabel\">\r\n              [Optional] Add Video (takes place of image)\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"guideCreatorHeadInput\"\r\n              placeholder=\"Youtube URL\"\r\n              onChange={(e) => {\r\n                let url = e.target.value;\r\n                this.setState((prevState) => ({\r\n                  guideHead: {\r\n                    ...prevState.guideHead,\r\n                    video: url,\r\n                  },\r\n                }));\r\n                this.onNotSaved();\r\n              }}\r\n            ></input>\r\n          </div>\r\n          <div\r\n            className=\"saveButton\"\r\n            id=\"saveHeadButton\"\r\n            onClick={this.onSaveGuide}\r\n          >\r\n            Section Saved\r\n          </div>\r\n        </div>\r\n        <div className=\"guideCreatorSections\">\r\n          {this.state.guideSections.map((section) => (\r\n            <CreateGuideSection key={section.key} guideID={section.guideID} />\r\n          ))}\r\n        </div>\r\n        <div\r\n          className=\"addSectionButton\"\r\n          id=\"addSectionButtonHead\"\r\n          onClick={this.addSection}\r\n          style={{ display: \"none\" }}\r\n        >\r\n          Add Section\r\n        </div>\r\n        <div id=\"saveToolTip\">Save head section to add more</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default CreateGuide;\r\n","import React, { Component } from \"react\";\r\nimport { auth } from \"./Authentication\";\r\n\r\nclass LogInForm extends Component {\r\n  state = {\r\n    username: \"\",\r\n    password: \"\",\r\n    loading: false,\r\n  };\r\n\r\n  onSubmit = (e) => {\r\n    this.setState({\r\n      loading: true,\r\n    });\r\n    e.preventDefault();\r\n    auth(this.state.username, this.state.password)\r\n      .then((data) => {\r\n        // console.log(\"login\",data)\r\n        window.location.href = \"/\";\r\n      })\r\n      .catch((err) => {\r\n        // console.error(\"error\", err);\r\n        if(err.name === \"NotAuthorizedException\"){\r\n        document.getElementById(\"errorLabel\").innerHTML = \"Account not yet confirmed, please check your email\";\r\n        } else{\r\n          document.getElementById(\"errorLabel\").innerHTML = err.message;\r\n        }\r\n        this.setState({\r\n          loading: false,\r\n        });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"signUpForm\">\r\n        <div id=\"signInHead\">Log In</div>\r\n        <div className=\"errorLabel\" id=\"errorLabel\"></div>\r\n        <div className=\"signInLabel\">Username</div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"signUpFormInput\"\r\n          placeholder=\"Username\"\r\n          onChange={(e) => {\r\n            let username = e.target.value;\r\n            this.setState((prevState) => ({\r\n              ...prevState,\r\n              username: username,\r\n            }));\r\n          }}\r\n        ></input>\r\n        <div className=\"signInLabel\">Password</div>\r\n        <input\r\n          type=\"password\"\r\n          className=\"signUpFormInput\"\r\n          placeholder=\"Password\"\r\n          onChange={(e) => {\r\n            let password = e.target.value;\r\n            this.setState((prevState) => ({\r\n              ...prevState,\r\n              password: password,\r\n            }));\r\n          }}\r\n        ></input>\r\n        {this.state.loading ? (\r\n          <img\r\n            src=\"./assets/loading.gif\"\r\n            alt=\"Loading\"\r\n            className=\"loadingGif\"\r\n          ></img>\r\n        ) : (\r\n          <div id=\"submitButton\" onClick={this.onSubmit}>\r\n            Submit\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LogInForm;\r\n","import React, { Component } from \"react\";\r\nimport LogInForm from '../components/loginForm'\r\n\r\n\r\nclass LoginPage extends Component {\r\n\r\n  state = {};\r\n\r\n  componentDidMount(){\r\n    document.title = \"Login\"\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"loginPage\">\r\n        <div id=\"loginPageForm\">\r\n            <LogInForm />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginPage;\r\n","import { CognitoUserPool } from \"amazon-cognito-identity-js\";\r\nimport React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\n\r\n// const tools = require(\"../tools\");\r\n\r\nclass SignUpForm extends Component {\r\n  url = \"\";\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/createUser\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/createUser\";\r\n    }\r\n  }\r\n\r\n  userPool = new CognitoUserPool({\r\n    UserPoolId: \"us-east-2_r9mOSgn28\",\r\n    ClientId: \"4id2vq725vkn530cdcj355d0dt\",\r\n  });\r\n\r\n  state = {\r\n    email: \"\",\r\n    username: \"\",\r\n    password: \"\",\r\n    invalid: false,\r\n    loading: false,\r\n  };\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      loading: true,\r\n    });\r\n    this.userPool.signUp(\r\n      this.state.username,\r\n      this.state.password,\r\n      [\r\n        {\r\n          Name: \"email\",\r\n          Value: this.state.email,\r\n        },\r\n      ],\r\n      null,\r\n      (err, data) => {\r\n        if (err) {\r\n          // console.log(err.message);\r\n          document.getElementById(\"errorLabel\").innerHTML = \"Invalid email, username, or password\";\r\n          document.getElementById(\"errorLabelSubscript\").innerHTML = err.message;\r\n          this.setState({\r\n            loading: false,\r\n          });\r\n        } else {\r\n          // invalid = false;\r\n          let user = {\r\n            username: this.state.username,\r\n            email: this.state.email,\r\n          };\r\n          let formData = new FormData();\r\n          formData.append(\"file\", JSON.stringify(user));\r\n          axios.post(this.url, formData).then((res) => {\r\n            // console.log(data);\r\n            window.location.href = \"/\";\r\n          });\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"signUpForm\">\r\n        <div id=\"signInHead\">Log In</div>\r\n        <div className=\"errorLabel\" id=\"errorLabel\"></div>\r\n        <div className=\"errorLabelSubscript\" id=\"errorLabelSubscript\"></div>\r\n        <div className=\"signInLabel\">Email</div>\r\n        <input\r\n          type=\"email\"\r\n          className=\"signUpFormInput\"\r\n          placeholder=\"Email\"\r\n          onChange={(e) => {\r\n            let email = e.target.value;\r\n            this.setState((prevState) => ({\r\n              ...prevState,\r\n              email: email,\r\n            }));\r\n          }}\r\n        ></input>\r\n        <div className=\"signInLabel\">Username</div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"signUpFormInput\"\r\n          placeholder=\"Username\"\r\n          onChange={(e) => {\r\n            let username = e.target.value;\r\n            this.setState((prevState) => ({\r\n              ...prevState,\r\n              username: username,\r\n            }));\r\n          }}\r\n        ></input>\r\n        <div className=\"signInLabel\">Password</div>\r\n        <input\r\n          type=\"password\"\r\n          className=\"signUpFormInput\"\r\n          placeholder=\"Password\"\r\n          onChange={(e) => {\r\n            let password = e.target.value;\r\n            this.setState((prevState) => ({\r\n              ...prevState,\r\n              password: password,\r\n            }));\r\n          }}\r\n        ></input>\r\n        {this.state.loading ? (\r\n          <img\r\n            src=\"./assets/loading.gif\"\r\n            alt=\"Loading\"\r\n            className=\"loadingGif\"\r\n          ></img>\r\n        ) : (\r\n          <div id=\"submitButton\" onClick={this.onSubmit}>\r\n            Submit\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignUpForm;\r\n","import React, { Component } from \"react\";\r\nimport SignUpForm from '../components/signUpForm'\r\n\r\n\r\nclass SignUpPage extends Component {\r\n\r\n  state = {};\r\n\r\n  componentDidMount(){\r\n    document.title = \"Sign Up\"\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"loginPage\">\r\n        <div id=\"loginPageForm\">\r\n            <SignUpForm />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignUpPage;\r\n","import React, { Component } from \"react\";\r\nimport FileUpload from \"../components/fileUpload\";\r\nimport axios from \"axios\";\r\nimport { v4 } from \"uuid\";\r\nimport { session } from \"./Authentication\";\r\n\r\nclass Section {\r\n  constructor(\r\n    id,\r\n    sectionID = v4(),\r\n    title = \"\",\r\n    description = \"\",\r\n    image = \"\",\r\n    video = \"\"\r\n  ) {\r\n    this.guideID = id;\r\n    this.sectionID = sectionID;\r\n    this.title = title;\r\n    this.description = description;\r\n    this.image = image;\r\n    this.video = video;\r\n  }\r\n}\r\n\r\nclass EditGuideSection extends Component {\r\n  state = {\r\n    guideSection: this.props.section.sectionID\r\n      ? this.props.section\r\n      : new Section(this.props.guideID),\r\n    submitID: v4(),\r\n    userToken: \"\",\r\n  };\r\n\r\n  url = \"\";\r\n  deleteUrl = \"\";\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/uploadGuideSection\";\r\n      this.deleteUrl = \"http://localhost:8080/deleteGuideSection\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideSection\";\r\n      this.deleteUrl =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/deleteGuideSection\";\r\n    }\r\n    console.log(this.state.guideSection.sectionID);\r\n\r\n    if (!this.props.section.sectionID) {\r\n      this.props.unsaved();\r\n    }\r\n    session()\r\n      .then((val) => {\r\n        if (val) {\r\n          let token = val.Session.idToken;\r\n          this.setState({\r\n            userToken: token,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  onSaveGuide = () => {\r\n    if (this.state.guideSection.title) {\r\n      let button = document.getElementById(this.state.submitID);\r\n      button.innerHTML = \"Saving....\"\r\n      // console.log(this.state.guideSection);\r\n      let formData = new FormData();\r\n      formData.append(\"file\", JSON.stringify(this.state.guideSection));\r\n      axios.post(this.url, formData).then((res) => {\r\n        button.classList = \"saveButton\";\r\n        button.innerHTML = \"Saved\";\r\n      });\r\n      this.props.saved();\r\n    }\r\n  };\r\n\r\n  onAddSectionImg = (res) => {\r\n    this.setState((prevState) => ({\r\n      guideSection: {\r\n        ...prevState.guideSection,\r\n        image: res.data.Location,\r\n      },\r\n    }));\r\n\r\n    // console.log(this.state.guideSection);\r\n  };\r\n\r\n  onNotSaved = () => {\r\n    let button = document.getElementById(this.state.submitID);\r\n    button.classList = \"unsavedButton\";\r\n    button.innerHTML = \"Save Changes\";\r\n    this.props.unsaved();\r\n  };\r\n\r\n  onDeleteSection = () => {\r\n    let formData = new FormData();\r\n    formData.append(\r\n      \"file\",\r\n      JSON.stringify({\r\n        guideID: this.state.guideSection.guideID,\r\n        sectionID: this.state.guideSection._id,\r\n        token: this.state.userToken.jwtToken,\r\n      })\r\n    );\r\n    axios.post(this.deleteUrl, formData).then((res) => {this.props.saved()});\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"guideCreatorSection\">\r\n        <div className=\"deleteSection\" onClick={this.onDeleteSection}>\r\n          ‚úñ\r\n        </div>\r\n        <div className=\"guideSectionCreatorLabel\">Add Section Title</div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"guideCreatorSectionInput\"\r\n          placeholder=\"Section Title\"\r\n          value={this.state.guideSection.title}\r\n          onChange={(e) => {\r\n            let title = e.target.value;\r\n            this.setState((prevState) => ({\r\n              guideSection: {\r\n                ...prevState.guideSection,\r\n                title: title,\r\n              },\r\n            }));\r\n            this.onNotSaved();\r\n          }}\r\n        ></input>\r\n        <div className=\"guideSectionCreatorLabel\">Add Section Description</div>\r\n        <textarea\r\n          type=\"text\"\r\n          className=\"guideCreatorSectionInput\"\r\n          placeholder=\"Description\"\r\n            rows=\"10\"\r\n          value={this.state.guideSection.description || \"\"}\r\n          onChange={(e) => {\r\n            let description = e.target.value;\r\n            this.setState((prevState) => ({\r\n              guideSection: {\r\n                ...prevState.guideSection,\r\n                description: description,\r\n              },\r\n            }));\r\n            this.onNotSaved();\r\n          }}\r\n        ></textarea>\r\n        <div className=\"guideCreatorSectionAddImage\">\r\n          <div className=\"guideSectionCreatorLabel\">[Optional] Add Image</div>\r\n          {this.state.guideSection.image ? (\r\n            <img\r\n              className=\"guideCreatorSectionAddImagePreview\"\r\n              src={this.state.guideSection.image}\r\n              width=\"100px\"\r\n              height=\"100px\"\r\n              alt=\"Preview\"\r\n            ></img>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <FileUpload handler={this.onAddSectionImg} />\r\n\r\n          <div className=\"guideSectionCreatorLabel\">\r\n            [Optional] Add Video (takes place of image)\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"guideCreatorSectionInput\"\r\n            placeholder=\"Youtube URL\"\r\n            value={this.state.guideSection.video || \"\"}\r\n            onChange={(e) => {\r\n              let url = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideSection: {\r\n                  ...prevState.guideSection,\r\n                  video: url,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></input>\r\n        </div>\r\n        <div\r\n          className=\"saveButton\"\r\n          id={this.state.submitID}\r\n          onClick={this.onSaveGuide}\r\n        >\r\n          Section Saved\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default EditGuideSection;\r\n","import { v4 } from \"uuid\";\r\nimport React, { Component } from \"react\";\r\nimport FileUpload from \"../components/fileUpload\";\r\nimport axios from \"axios\";\r\nimport { session, getUsername } from \"../components/Authentication\";\r\nimport EditGuideSection from \"../components/guideSectionEditor\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nlet user = \"\";\r\nsession()\r\n  .then((val) => {\r\n    if (val) {\r\n      let { Value } = val.Attributes[2];\r\n      getUsername(Value).then((data) => {\r\n        user = data;\r\n      });\r\n    }\r\n  })\r\n  .catch((err) => console.log(err));\r\n\r\nclass guideHead {\r\n  constructor() {\r\n    this.guideID = v4();\r\n    this.author = user;\r\n    this.title = \"\";\r\n    this.description = \"\";\r\n    this.image = \"\";\r\n    this.video = \"\";\r\n    this.scoreUp = 0;\r\n    this.scoreDown = 0;\r\n  }\r\n}\r\nclass Section {\r\n  constructor() {\r\n    this.guideID = \"\";\r\n    this.sectionID = \"\";\r\n    this.title = \"\";\r\n    this.description = \"\";\r\n    this.image = \"\";\r\n    this.video = \"\";\r\n  }\r\n}\r\n\r\nclass EditGuide extends Component {\r\n  state = {\r\n    guideHead: new guideHead(),\r\n    guideSections: [],\r\n    unsaved: false,\r\n  };\r\n\r\n  id = new URLSearchParams(this.props.location.search).get(\"guideID\");\r\n  saveUrl = \"\";\r\n  getUrl = \"\";\r\n  componentDidMount() {\r\n    document.title = \"Edit Guide\"\r\n\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.saveUrl = \"http://localhost:8080/uploadGuideHead\";\r\n      this.getUrl = \"http://localhost:8080/getGuide?guideId=\" + this.id;\r\n    } else {\r\n      this.getUrl =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getGuide?guideId=\" +\r\n        this.id;\r\n      this.saveUrl =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideHead\";\r\n    }\r\n\r\n    this.getSections();\r\n    // console.log(this.state.guideSections);\r\n  }\r\n\r\n  getSections() {\r\n    // console.log(this.url);\r\n    fetch(this.getUrl)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        // console.log(data);\r\n        this.setState({\r\n          guideHead: data[0],\r\n          guideSections: data[1],\r\n        });\r\n        // console.log(this.state.guideSections);\r\n      });\r\n  }\r\n\r\n  onSaveGuide = () => {\r\n    let button = document.getElementById(\"saveHeadButton\");\r\n    button.innerHTML = \"Saving....\"\r\n    // console.log(this.state.guideHead);\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify(this.state.guideHead));\r\n    axios.post(this.saveUrl, formData).then((res) => {\r\n      button.classList = \"saveButton\";\r\n      button.innerHTML = \"Section Saved\";\r\n      this.setState({\r\n        unsaved: false,\r\n      });\r\n    });\r\n  };\r\n\r\n  onAddHeadImg = (res) => {\r\n    this.setState((prevState) => ({\r\n      guideHead: {\r\n        ...prevState.guideHead,\r\n        image: res.data.Location,\r\n      },\r\n    }));\r\n\r\n    // console.log(this.state.guideHead);\r\n  };\r\n\r\n  onNotSaved = () => {\r\n    let button = document.getElementById(\"saveHeadButton\");\r\n    button.classList = \"unsavedButton\";\r\n    button.innerHTML = \"Save Changes\";\r\n    this.setState({\r\n      unsaved: true,\r\n    });\r\n    // console.log(this.state);\r\n  };\r\n\r\n  onSectionNotSaved = () => {\r\n    this.setState({\r\n      unsaved: true,\r\n    });\r\n  };\r\n  onSectionSaved = () => {\r\n    this.setState({\r\n      unsaved: false,\r\n    });\r\n    this.getSections();\r\n  };\r\n  sectionIndex = this.state.guideSections.length;\r\n  addSection = () => {\r\n    this.sectionIndex++;\r\n    // console.log(this.sectionIndex);\r\n    this.setState(\r\n      (prevState) => ({\r\n        guideHead: {\r\n          ...prevState.guideHead,\r\n        },\r\n        guideSections: [...prevState.guideSections, new Section()],\r\n      }),\r\n      () => {\r\n        // console.log(this.state.guideSections);\r\n      }\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"guideCreator\">\r\n                    <Link to={\"/guide?guideID=\" + this.state.guideHead.guideID} key={this.state.guideHead.guideID}>\r\n                  <div className=\"backButton\"> ‚¨Ö Back</div>\r\n              </Link>\r\n        {/* <div className=\"id\">{this.state.guideHead.guideID}</div> */}\r\n        <div id=\"guideCreatorHead\">\r\n          <div className=\"guideCreatorLabel\">Add Title</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"guideCreatorHeadInput\"\r\n            placeholder=\"Title\"\r\n            value={this.state.guideHead.title}\r\n            onChange={(e) => {\r\n              let title = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideHead: {\r\n                  ...prevState.guideHead,\r\n                  title: title,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></input>\r\n          <div className=\"guideCreatorLabel\">Add Description</div>\r\n          <textarea\r\n            type=\"text\"\r\n            className=\"guideCreatorHeadInput\"\r\n            placeholder=\"Description\"\r\n            rows=\"10\"\r\n            value={this.state.guideHead.description}\r\n            onChange={(e) => {\r\n              let description = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideHead: {\r\n                  ...prevState.guideHead,\r\n                  description: description,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></textarea>\r\n          <div className=\"guideCreatorHeadAddImage\">\r\n            <div className=\"guideCreatorLabel\">[Optional] Add Image</div>\r\n            {this.state.guideHead.image ? (\r\n              <img\r\n                className=\"guideCreatorHeadAddImagePreview\"\r\n                src={this.state.guideHead.image}\r\n                width=\"100px\"\r\n                height=\"100px\"\r\n                alt=\"Preview\"\r\n              ></img>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <FileUpload handler={this.onAddHeadImg} />\r\n            <div className=\"guideCreatorLabel\">\r\n              [Optional] Add Video (takes place of image)\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"guideCreatorHeadInput\"\r\n              placeholder=\"Youtube URL\"\r\n              value={this.state.guideHead.video}\r\n              onChange={(e) => {\r\n                let url = e.target.value;\r\n                this.setState((prevState) => ({\r\n                  guideHead: {\r\n                    ...prevState.guideHead,\r\n                    video: url,\r\n                  },\r\n                }));\r\n                this.onNotSaved();\r\n              }}\r\n            ></input>\r\n          </div>\r\n          <div\r\n            className=\"saveButton\"\r\n            id=\"saveHeadButton\"\r\n            onClick={this.onSaveGuide}\r\n          >\r\n            Section Saved\r\n          </div>\r\n        </div>\r\n        <div className=\"guideCreatorSections\">\r\n          {this.state.guideSections.map((section) => (\r\n            <EditGuideSection\r\n              key={section.sectionID ? section.sectionID : this.sectionIndex}\r\n              section={section}\r\n              guideID={this.id}\r\n              unsaved={this.onSectionNotSaved}\r\n              saved={this.onSectionSaved}\r\n            />\r\n          ))}\r\n        </div>\r\n        {this.state.unsaved ? (\r\n          <div className=\"addSectionButton\">\r\n            Save other sections to add more\r\n          </div>\r\n        ) : (\r\n          <div className=\"addSectionButton\" onClick={this.addSection}>\r\n            Add Section\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default EditGuide;\r\n","import React, { Component } from \"react\";\r\nimport CommentBox from \"../components/CommentBox\";\r\nimport { session, getUsername } from \"../components/Authentication\";\r\n\r\nclass Board extends Component {\r\n  state = {\r\n    user: false,\r\n    username: \"\",\r\n    searchValue: \"\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    document.title = \"Community Board\";\r\n    session()\r\n      .then((val) => {\r\n        if (val) {\r\n          // console.log(\"USER\",val);\r\n          let { Value } = val.Attributes[2];\r\n          getUsername(Value).then((data) => {\r\n            this.setState({\r\n              username: data,\r\n              user: true,\r\n            });\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n    // console.log(\"Board      ----->\",this.props.searchValue)\r\n    this.setState({\r\n      searchValue: this.props.searchValue ? this.props.searchValue : \"\",\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"board\">\r\n        <CommentBox\r\n          parentID={this.id}\r\n          user={this.state.user}\r\n          username={this.state.username}\r\n          hide={false}\r\n          submit={false}\r\n          sortNew={true}\r\n          permaDelete={true}\r\n          prompt=\"Start a discussion\"\r\n          searchValue={this.props.searchValue}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Board;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport socketIOClient from 'socket.io-client'\r\nconst tools = require(\"../tools\");\r\n\r\n\r\n\r\nlet url = \"\";\r\nif (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n  url = \"http://localhost:8080/\";\r\n} else {\r\n  url =\r\n    \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/\";\r\n}\r\n\r\nconst ChatTools = (roomID, currentUser) => {\r\n    // console.log(roomID)\r\n    const [messages, updateMessages] = useState([]);\r\n    const ref = useRef();\r\n    useEffect(()=>{\r\n    \r\n        ref.current = socketIOClient(url,{\r\n            query:{roomID:roomID}\r\n        });\r\n\r\n\r\n        ref.current.on(\"newChatMessage\", (message)=>{\r\n            let incoming = {\r\n                ...message,\r\n                isCurrentUser:message.senderID === currentUser,\r\n            };\r\n            // console.log(incoming)\r\n            updateMessages((messages)=>[...messages, incoming]);\r\n            \r\n            let newLog = messages;\r\n            newLog.push(incoming)\r\n\r\n            // console.log(newLog)\r\n\r\n            tools.saveChatLog(roomID, newLog);\r\n\r\n        });\r\n\r\n        return () =>{\r\n            ref.current.disconnect();\r\n        }\r\n         // eslint-disable-next-line\r\n    }, [roomID, currentUser])\r\n    const send = (message) =>{\r\n        ref.current.emit(\"newChatMessage\",{\r\n            body:message,\r\n            senderID:currentUser\r\n        });\r\n      \r\n    };\r\n    return {messages, send}\r\n};\r\n\r\nexport default ChatTools;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ChatTools from \"./ChatTools\";\r\n// import ProfilePic from \"./ProfilePic\";\r\n\r\n\r\nconst ChatBox = (props) => {\r\n  const { messages, send } = ChatTools(props.roomID, props.currentUser);\r\n  const [newMessage, updateSendMessage] = useState([]);\r\n  const messagesBottomRef = useRef(null);\r\n\r\n  const onMessageChange = (e) => {\r\n    //   e.preventDefault();\r\n    updateSendMessage(e.target.value);\r\n  };\r\n\r\n  const onSendMessage = () => {\r\n    if (newMessage && typeof newMessage === \"string\") {\r\n      send(newMessage);\r\n      updateSendMessage(\"\");\r\n      document.getElementById(\"input\").value = \"\";\r\n\r\n    }\r\n  };\r\n\r\n  const autoScroll = () => {\r\n    messagesBottomRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    messages.unshift(...props.prevLogs.filter((message) => message !== \"\"));\r\n    // console.log(\"Prev Logs\",props.prevLogs)\r\n     // eslint-disable-next-line\r\n  }, []);\r\n  useEffect(() => {\r\n    // if (messages.length > 0) {\r\n      // console.log(messages);\r\n    // }\r\n    autoScroll();\r\n    // setTimeout(()=>{\r\n    //   autoScroll();\r\n    // }, 5000)\r\n  }, [messages, props.roomID, props.prevLogs]);\r\n\r\n  return (\r\n    <div className=\"chatBox\">\r\n      <div className=\"chatBoxMessages\">\r\n        {messages.map((message, i) => (\r\n          <div\r\n            className={\r\n              message.senderID === props.currentUser\r\n                ? \"chatMessage self\"\r\n                : \"chatMessage\"\r\n            }\r\n            key={i}\r\n          >\r\n            {/* <ProfilePic username={message.senderID}></ProfilePic> */}\r\n            <Link to={\"/profile?user=\" + message.senderID}><div className=\"messageUsername\">{message.senderID}: </div></Link>\r\n            {message.body}\r\n          </div>\r\n        ))}\r\n        <div id=\"messagesBottom\" ref={messagesBottomRef}></div>\r\n      </div>\r\n      <div className=\"chatBoxInputBox\">\r\n        <input\r\n          type=\"text\"\r\n          onChange={onMessageChange}\r\n          placeholder=\"send message...\"\r\n          className=\"chatBoxInput\"\r\n          id=\"input\"\r\n        ></input>\r\n        <button onClick={onSendMessage}>Send</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBox;\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  session,\r\n  getUserDataFromUsername,\r\n  getUsername,\r\n} from \"../components/Authentication\";\r\nimport FileUpload from \"../components/fileUpload\";\r\nimport axios from \"axios\";\r\nimport ChatBox from \"../components/ChatBox\";\r\n\r\nclass Profile extends Component {\r\n  id = new URLSearchParams(this.props.location.search).get(\"user\");\r\n  defaultUser = {\r\n    username: \"User Not Found\",\r\n    email: \"\",\r\n    image: \"\",\r\n  };\r\n  state = {\r\n    user: \"\",\r\n    currentUser: \"\",\r\n    id: \"\",\r\n    prevLogs: [\"\"],\r\n  };\r\n  url = \"\";\r\n  listen = \"\";\r\n\r\n  componentDidMount() {\r\n    // console.log(\"PROFILE ID\", this.id);\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/createUser\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/createUser\";\r\n    }\r\n    this.listen = this.props.history.listen((location, action) => {\r\n      this.setID(location);\r\n      window.location.reload();\r\n    });\r\n    this.setID();\r\n  }\r\n  \r\n  componentWillUnmount() {\r\n    this.listen();\r\n  }\r\n\r\n  getLogs = async () => await new Promise((resolve,reject)=>{\r\n    let url = \"\";\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      url = \"http://localhost:8080/getChatLog\";\r\n    } else {\r\n      url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getChatLog\";\r\n    }\r\n    let formData = new FormData();\r\n    formData.append(\r\n      \"file\",\r\n      JSON.stringify({\r\n        roomID: this.state.id,\r\n      })\r\n    );\r\n    axios.post(url, formData).then((val) => {\r\n      // console.log(val.data)\r\n      this.setState({\r\n        prevLogs: val.data.chatLog,\r\n      }, ()=>{\r\n        resolve();\r\n        // console.log(this.state.prevLogs)\r\n      });\r\n    }).catch((err)=>{\r\n      reject(err)\r\n    });\r\n  });\r\n\r\n  setID(location = this.props.location) {\r\n    // console.log(location)\r\n    // console.log(\"URL ID: \", new URLSearchParams(location.search).get(\"user\"));\r\n    this.setState(\r\n      {\r\n        id: new URLSearchParams(location.search).get(\"user\"),\r\n      },\r\n      () => {\r\n        this.getLogs().then(()=>{\r\n          this.getUserData();\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  getUserData() {\r\n    // console.log(\"ID: \", this.state.id);\r\n    document.title = this.state.id;\r\n    getUserDataFromUsername(this.state.id).then((user) => {\r\n      this.setState({\r\n        user: user || this.defaultUser,\r\n      });\r\n      session()\r\n        .then((val) => {\r\n          if (val) {\r\n            let { Value } = val.Attributes[2];\r\n            getUsername(Value).then((currentUser) => {\r\n              this.setState({\r\n                currentUser: currentUser,\r\n              });\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    });\r\n\r\n  }\r\n\r\n  onImageChange = (res) => {\r\n    let user = {\r\n      username: this.state.user.username,\r\n      email: this.state.user.email,\r\n      image: res.data.Location,\r\n    };\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify(user));\r\n    axios.post(this.url, formData).then((res) => {\r\n      this.setState({\r\n        user: res.data,\r\n      });\r\n    });\r\n  };\r\n\r\n  defaultImage =\r\n    \"https://guia-images.s3-us-west-1.amazonaws.com/Full-Green-Tree-984x1024.png\";\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"profileContainer\">\r\n        <div id=\"profile\">\r\n          <img\r\n            className=\"profileImage\"\r\n            src={this.state.user.image || this.defaultImage}\r\n            alt={this.state.user.username}\r\n          ></img>\r\n          {this.state.currentUser === this.id ? (\r\n            <FileUpload handler={this.onImageChange} />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <div className=\"profileUsername\">{this.state.user.username}</div>\r\n          <div className=\"profileEmail\">{this.state.user.email}</div>\r\n        </div>\r\n        <ChatBox\r\n          roomID={this.state.id}\r\n          currentUser={this.state.currentUser}\r\n          prevLogs={this.state.prevLogs}\r\n          key={this.state.prevLogs.length}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Profile;\r\n","import React, { Component } from \"react\";\r\nimport ProfilePic from \"../components/ProfilePic\";\r\nconst axios = require(\"axios\");\r\n// import { Link } from \"react-router-dom\";\r\n// import GuidePreview from \"../components/guidePreview\";\r\n\r\nclass UsersPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      users: [],\r\n      search:\"\"\r\n    };\r\n    this.onSearch = this.onSearch.bind(this)\r\n  }\r\n  url = \"\";\r\n\r\n  componentDidMount() {\r\n      document.title = \"Users\"\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/getUsers\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUsers\";\r\n    }\r\n    // console.log(this.url)\r\n    this.getAll();\r\n  }\r\n\r\n  getAll() {\r\n    axios.get(this.url).then((res) => {\r\n      this.setState({\r\n        users: res.data,\r\n      });\r\n    });\r\n  }\r\n\r\n onSearch(e){\r\n    this.setState({\r\n        search:e.target.value\r\n    })\r\n } \r\n\r\n  render() {\r\n    return (\r\n      <div id=\"usersPage\">\r\n      <input className=\"userSearch\" placeholder=\"üîé Search Users\" type=\"text\" onChange={this.onSearch}></input>\r\n          {this.state.users\r\n                .filter((user) => {\r\n                  return user.username\r\n                    .toLowerCase()\r\n                    .includes(this.state.search.toLowerCase().trim());\r\n                })\r\n            .map((user) => (\r\n              <div className=\"userPreview\" key={user.username}>\r\n                <ProfilePic username={user.username} />\r\n              </div>\r\n            ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default UsersPage;\r\n","import \"./App.scss\";\r\nimport React, { Component } from \"react\";\r\nimport { Link, Route, Switch, withRouter } from \"react-router-dom\";\r\nimport Home from \"./pages/Home.jsx\";\r\nimport Guide from \"./pages/Guide\";\r\nimport CreateGuide from \"./pages/CreateGuide\";\r\nimport LoginPage from \"./pages/LoginPage\";\r\nimport SignUpPage from \"./pages/SignUpPage\";\r\nimport EditGuide from \"./pages/EditGuide\";\r\nimport { logout, session, getUsername } from \"./components/Authentication\";\r\nimport Board from \"./pages/Board\";\r\nimport Profile from \"./pages/Profile\";\r\nimport ProfilePic from \"./components/ProfilePic\";\r\nimport UsersPage from \"./pages/Users\";\r\n\r\n// import {\r\n//   BrowserRouter as Router,\r\n//   Switch,\r\n//   Route,\r\n//   Link\r\n// } from \"react-router-dom\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: false,\r\n      username: \"\",\r\n      searchValue: \"\",\r\n    };\r\n    this.onSearch = this.onSearch.bind(this);\r\n  }\r\n  hide(e) {\r\n    this.setState({\r\n      homeLinks: true,\r\n    });\r\n  }\r\n\r\n  // //RESET STATE ON BACK\r\n  // //or on load ... i think?\r\n  // componentDidMount(){\r\n  //   window.onpopstate = () =>{\r\n  //     this.setState({\r\n  //       test:true\r\n  //     })\r\n  //   }\r\n  // }\r\n\r\n  componentDidMount() {\r\n    session()\r\n      .then((val) => {\r\n        if (val) {\r\n          // console.log(\"USER\",val);\r\n          let { Value } = val.Attributes[2];\r\n          getUsername(Value).then((data) => {\r\n            // console.log(data);\r\n            this.setState({\r\n              username: data,\r\n            });\r\n          });\r\n          this.setState({\r\n            user: true,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n\r\n    // console.log(this.props.location);\r\n  }\r\n\r\n  onSearch(e) {\r\n    this.setState(\r\n      {\r\n        searchValue: e.target.value,\r\n      },\r\n      () => {\r\n        // console.log(\"App       ----->\",this.state.searchValue);\r\n      }\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <div id=\"container\">\r\n        <div id=\"mainSidebar\">\r\n          <Link to=\"/\">\r\n            <img src=\"./assets/GuiaLogo1.svg\" alt=\"Logo\" id=\"mainLogo\"></img>\r\n          </Link>\r\n\r\n          {/* <div> */}\r\n          {this.props.location.pathname === \"/\" ? (\r\n            //|| this.props.location.pathname === \"/board\"\r\n            <input\r\n              id=\"searchBar\"\r\n              type=\"text\"\r\n              onChange={this.onSearch}\r\n              placeholder=\"üîç Search Guides\"\r\n            ></input>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {/* </div> */}\r\n          {this.state.user ? (\r\n            <div className=\"signedInButtons\">\r\n              <div className=\"sidebarButton bold profileButton\">\r\n                <ProfilePic\r\n                  username={this.state.username}\r\n                  key={this.state.username}\r\n                />\r\n              </div>\r\n              <Link to=\"/\">\r\n                <div className=\"sidebarButton bold\">\r\n                  <span role=\"img\" aria-label=\"Home Page\">\r\n                    {\" \"}\r\n                    üè†{\" \"}\r\n                  </span>\r\n                  Guides\r\n                </div>\r\n              </Link>\r\n              <Link to=\"/createGuide\">\r\n                <div className=\"sidebarButton bold\">\r\n                  <span role=\"img\" aria-label=\"Create Guide\">\r\n                    {\" \"}\r\n                    üìù{\" \"}\r\n                  </span>\r\n                  Create Guide\r\n                </div>\r\n              </Link>\r\n              <Link to=\"/board\">\r\n                <div className=\"sidebarButton bold\">\r\n                  <span role=\"img\" aria-label=\"Community Board\">\r\n                    {\" \"}\r\n                    üì∞{\" \"}\r\n                  </span>\r\n                  Community Board\r\n                </div>\r\n              </Link>\r\n              <Link to=\"/users\">\r\n                <div className=\"sidebarButton bold\">\r\n                  <span role=\"img\" aria-label=\"Community Board\">\r\n                    {\" \"}\r\n                    üîé{\" \"}\r\n                  </span>\r\n                  Search Users\r\n                </div>\r\n              </Link>\r\n\r\n              <div className=\"sidebarButton signOutButton\" onClick={logout}>\r\n                ‚¨Ö Sign Out\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"signInButtons\">\r\n            <Link to=\"/\">\r\n                <div className=\"sidebarButton bold\">\r\n                  <span role=\"img\" aria-label=\"Home Page\">\r\n                    {\" \"}\r\n                    üè†{\" \"}\r\n                  </span>\r\n                  Guides\r\n                </div>\r\n              </Link>\r\n              <Link to=\"/login\">\r\n                <div className=\"sidebarButton bold\">\r\n                  <span role=\"img\" aria-label=\"Login\">\r\n                    üö™\r\n                  </span>\r\n                  &nbsp; Login\r\n                </div>\r\n              </Link>\r\n              <Link to=\"/signup\">\r\n                <div className=\"sidebarButton bold\"><span role=\"img\" aria-label=\"Sign Up\">‚ûï</span> Sign Up</div>\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div id=\"mainContainer\">\r\n          <Switch>\r\n            {/* <Route\r\n              path=\"/testUpload\"\r\n              render={(props) => <FileUpload {...props}></FileUpload>}\r\n            ></Route> */}\r\n            <Route\r\n              path=\"/profile\"\r\n              render={(props) => <Profile {...props} />}\r\n            ></Route>\r\n            <Route\r\n              path=\"/users\"\r\n              render={(props) => <UsersPage {...props} />}\r\n            ></Route>\r\n            <Route\r\n              path=\"/edit\"\r\n              render={(props) => <EditGuide {...props} />}\r\n            ></Route>\r\n            <Route\r\n              path=\"/login\"\r\n              render={(props) => <LoginPage {...props}></LoginPage>}\r\n            ></Route>\r\n            <Route\r\n              path=\"/signup\"\r\n              render={(props) => <SignUpPage {...props}></SignUpPage>}\r\n            ></Route>\r\n            <Route\r\n              path=\"/createGuide\"\r\n              render={(props) => <CreateGuide {...props}></CreateGuide>}\r\n            ></Route>\r\n            <Route\r\n              path=\"/guide\"\r\n              render={(props) => <Guide {...props}></Guide>}\r\n            ></Route>\r\n            <Route\r\n              path=\"/board\"\r\n              render={(props) => (\r\n                <Board {...props} searchValue={this.state.searchValue} />\r\n              )}\r\n            ></Route>\r\n\r\n            <Route\r\n              path=\"/\"\r\n              render={(props) => (\r\n                <Home\r\n                  {...props}\r\n                  searchValue={this.state.searchValue}\r\n                  Hide={(e) => this.hide(e)}\r\n                ></Home>\r\n              )}\r\n            ></Route>\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n// import { Router } from 'react-router-dom';\r\nimport { BrowserRouter} from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// const cognito = require('amazon-cognito-identity-js')\r\nimport axios from \"axios\";\r\n\r\n const getVidID = (url) => {\r\n  let cleanUrl = url.replace(\"https://\", \"\").trim();\r\n\r\n  if (cleanUrl.includes(\"youtu.be\")) {\r\n    let splitUrl = cleanUrl.split(\"/\");\r\n    return splitUrl[1];\r\n  } else {\r\n    let splitUrl = cleanUrl.split(\"?v=\");\r\n    let cleanSplitUrl = splitUrl[1].split(\"&\");\r\n    return cleanSplitUrl[0];\r\n  }\r\n};\r\n\r\nconst deleteGuide = (id, token) => {\r\n  let url = \"\";\r\n  if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n    url = \"http://localhost:8080/deleteGuide?guideId=\" + id + \"&token=\" + token;\r\n  } else {\r\n    url =\r\n      \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/deleteGuide?guideId=\" +\r\n      id +\r\n      \"&token=\" +\r\n      token;\r\n  }\r\n  // window.location.href('/')\r\n  fetch(url).then((res) => {\r\n    // console.log(res);\r\n  });\r\n};\r\n\r\n\r\nconst saveChatLog = (roomID, chatLog) => {\r\n  // console.log(\"Transitioning: \",transitioning);\r\n  let url = \"\";\r\n  if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n    url = \"http://localhost:8080/uploadChatLog\";\r\n  } else {\r\n    url =\r\n      \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadChatLog\";\r\n  }\r\n\r\n  // console.log(roomID, chatLog);\r\n\r\n  let formData = new FormData();\r\n  formData.append(\r\n    \"file\",\r\n    JSON.stringify({\r\n      roomID: roomID,\r\n      chatLog: chatLog,\r\n    })\r\n  );\r\n  axios.post(url, formData).then();\r\n\r\n};\r\n\r\n\r\nexport {getVidID, deleteGuide, saveChatLog}"],"sourceRoot":""}