(this.webpackJsonpguia=this.webpackJsonpguia||[]).push([[0],{157:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(81),s=a.n(r),o=(a(92),a(2)),c=a(3),u=a(22),l=a(5),d=a(4),m=(a(93),a(8)),g=a(9),h=a(23),p=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).guide=e.props.guide,e.url=e.guide.video,e.videoThumbnail=e.url?"https://img.youtube.com/vi/"+Object(h.getVidID)(e.url)+"/0.jpg":"",e}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"guidePreview"},!this.guide.image&&this.url&&i.a.createElement("div",{className:"guidePreviewImgBox"},i.a.createElement("img",{className:"guidePreviewImg",src:this.videoThumbnail,alt:this.guide.title})),this.guide.image&&i.a.createElement("div",{className:"guidePreviewImgBox"},i.a.createElement("img",{className:"guidePreviewImg",src:this.guide.image,alt:this.guide.title})),i.a.createElement("div",{className:"guidePreviewContent"},i.a.createElement("div",{className:"guidePreviewTitle"},this.guide.title),i.a.createElement("div",{className:"guidePreviewAuthor"},this.guide.author||"Anonymous"),i.a.createElement("div",{className:"guidePreviewDesc"},this.guide.description),i.a.createElement("div",{className:"guidePreviewScore"}," ",i.a.createElement("span",{role:"img","aria-label":"up"},"\ud83d\udc4d"),this.guide.scoreUp||0," /",i.a.createElement("span",{role:"img","aria-label":"down"}," \ud83d\udc4e"),this.guide.scoreDown||0)))}}]),a}(n.Component),v=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).url="",n.state={guides:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.title="Gu\xeda",this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getAll",this.getAll()}},{key:"getAll",value:function(){var e=this;fetch(this.url).then((function(e){return e.json()})).then((function(t){e.setState({guides:t})}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"homePage"},i.a.createElement("div",{id:"homeGuideContainer"},this.state.guides.sort((function(e,t){var a=e.scoreUp-e.scoreDown;return t.scoreUp-t.scoreDown-a})).filter((function(t){return t.title.toLowerCase().includes(e.props.searchValue.toLowerCase().trim())})).map((function(e){return i.a.createElement(m.b,{to:"/guide?guideID="+e.guideID,key:e.guideID},i.a.createElement(p,{guide:e}))}))))}}]),a}(n.Component),f=a(53),b=!1,S=function(e){var t=Object(g.f)();return i.a.createElement("div",{className:"deleteButton",onClick:function(a){b?(Object(h.deleteGuide)(e.id,e.token.jwtToken,window),t.push("/"),t.go(),b=!1):(a.target.innerHTML="Confirm Delete",b=!0)}},e.prompt?e.prompt:"Delete Guide")},E=a(6),w=a.n(E),y=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).url="",e.state={guide:e.props.guide,scoreUp:0,scoreDown:0},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/voteGuide",this.updateScores(this.state.guide)}},{key:"onVote",value:function(e){var t=this,a=new FormData,n={guideID:this.state.guide.guideID,voteType:e.target.classList[0],user:this.props.user};a.append("file",JSON.stringify(n)),w.a.post(this.url,a).then((function(e){t.setState({guide:e.data}),t.updateScores(e.data)}))}},{key:"updateScores",value:function(e){this.setState({scoreUp:e.scoreUp,scoreDown:e.scoreDown})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"guideVoteButtons"},i.a.createElement("div",{className:this.state.guide.upUsers.includes(this.props.user)?"guideUpvote voted":"guideUpvote"},i.a.createElement("span",{role:"img","aria-label":"up",className:"up",onClick:function(t){return e.onVote(t)}},"\ud83d\udc4d",this.state.scoreUp||0)),i.a.createElement("div",{className:this.state.guide.downUsers.includes(this.props.user)?"guideDownvote voted":"guideDownvote"},i.a.createElement("span",{role:"img","aria-label":"down",className:"down",onClick:function(t){return e.onVote(t)}},"\ud83d\udc4e",this.state.guide.scoreDown||0)))}}]),a}(n.Component),O=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).url="",e.state={comment:e.props.comment,scoreUp:0,scoreDown:0},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/voteComment",this.updateScores(this.state.comment)}},{key:"onVote",value:function(e){var t=this,a=new FormData,n={commentID:this.state.comment.commentID,voteType:e.target.classList[0],user:this.props.user};a.append("file",JSON.stringify(n)),w.a.post(this.url,a).then((function(e){t.setState({comment:e.data,scoreUp:e.data.scoreUp,scoreDown:e.data.scoreDown}),t.updateScores(e.data)}))}},{key:"updateScores",value:function(e){this.setState({scoreUp:e.scoreUp,scoreDown:e.scoreDown})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"guideVoteButtons"},i.a.createElement("div",{className:this.state.comment.upUsers.includes(this.props.user)?"guideUpvote voted":"guideUpvote"},i.a.createElement("span",{role:"img","aria-label":"up",className:"up",onClick:function(t){return e.onVote(t)}},"\ud83d\udc4d",this.state.scoreUp||0)),i.a.createElement("div",{className:this.state.comment.downUsers.includes(this.props.user)?"guideDownvote voted":"guideDownvote"},i.a.createElement("span",{role:"img","aria-label":"down",className:"down",onClick:function(t){return e.onVote(t)}},"\ud83d\udc4e",this.state.scoreDown||0)))}}]),a}(n.Component),I=w.a.CancelToken.source(),k=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).url="",e.state={image:""},e.getImage=function(){if(e.props.username){var t=new FormData;t.append("file",JSON.stringify(e.props.username)),w.a.post(e.url,t,{cancelToken:I.token}).then((function(t){e.setState({image:t.data?t.data.image:"https://guia-images.s3-us-west-1.amazonaws.com/Full-Green-Tree-984x1024.png"})}))}},e.defaultImage="https://guia-images.s3-us-west-1.amazonaws.com/Full-Green-Tree-984x1024.png",e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUserImage",this.getImage(),this.props.test}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return"[Deleted]"!==this.props.username?i.a.createElement(m.b,{to:"/profile?user="+this.props.username},i.a.createElement("div",{className:"profilePic"},i.a.createElement("img",{src:this.state.image||this.defaultImage,className:"userImage",alt:this.props.username,onClick:this.getImage}),i.a.createElement("div",{className:"profilePicUsername"},this.props.username))):i.a.createElement("div",{className:"profilePic"},i.a.createElement("img",{src:this.state.image||this.defaultImage,className:"userImage",alt:this.props.username,onClick:this.getImage}),i.a.createElement("div",{className:"profilePicUsername"},this.props.username))}}]),a}(n.Component),N=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).comment=e.props.comment,e}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"comment"},i.a.createElement("div",{className:"commentHead"},i.a.createElement(k,{username:this.comment.author})),i.a.createElement("div",{className:"commentBody"},this.comment.body),"[Deleted]"===this.comment.author?"":i.a.createElement("div",{className:"commentInteractions"},this.props.user?i.a.createElement(O,{comment:this.comment,user:this.props.username}):i.a.createElement("div",{className:"guideVoteButtons"},i.a.createElement("div",null,i.a.createElement("span",{role:"img","aria-label":"up",className:"up"},"\ud83d\udc4d",this.props.comment.scoreUp||0)),i.a.createElement("div",null,i.a.createElement("span",{role:"img","aria-label":"down",className:"down"},"\ud83d\udc4e",this.props.comment.scoreDown||0)))),i.a.createElement(F,{parentID:this.comment.commentID,user:this.props.user,username:this.props.username,hide:!0,reply:!0,deleted:"[Deleted]"===this.comment.author,prompt:"Leave a reply"}))}}]),a}(n.Component),j=a(158),C=a(13),D=a.n(C),x=a(25),H=a(31),L=new H.c({UserPoolId:"us-east-2_r9mOSgn28",ClientId:"4id2vq725vkn530cdcj355d0dt"}),U=function(){var e=Object(x.a)(D.a.mark((function e(t,a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var i=new H.b({Username:t,Pool:L}),r=new H.a({Username:t,Password:a});i.authenticateUser(r,{onSuccess:function(t){e(t)},onFailure:function(e){n(e)},newPasswordRequired:function(t){e(t)}})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(x.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var a=L.getCurrentUser();a?a.getSession((function(n,i){n?t(n):a.getUserAttributes((function(a,n){a?t(a):e({Session:i,Attributes:n})}))})):t()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=L.getCurrentUser();e&&(e.signOut(),window.location.href="/")},T=function(){var e=Object(x.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){var n="";n="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUser";var i=new FormData;i.append("file",JSON.stringify({email:t})),w.a.post(n,i).then((function(t){var a=t.data.username;e(a)})).catch((function(e){return a(e)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(x.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){var n="";n="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUser";var i=new FormData;i.append("file",JSON.stringify({email:t})),w.a.post(n,i).then((function(t){e(t.data)})).catch((function(e){return a(e)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(x.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){var n="";n="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUserFromName";var i=new FormData;i.append("file",JSON.stringify({username:t})),w.a.post(n,i).then((function(t){e(t.data)})).catch((function(e){return a(e)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=w.a.CancelToken.source(),F=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).createCommentUrl="",n.getCommentsUrl="",n.deleteUrl="",n.onAddComment=function(e){var t=e.target.value;n.setState({userComment:t})},n.uploadComment=function(){var e=new FormData;e.append("file",JSON.stringify({parentID:n.props.parentID,commentID:Object(j.a)(),author:n.props.username,body:n.state.userComment})),w.a.post(n.createCommentUrl,e,{cancelToken:M.token}).then((function(e){n.updateComments(),document.getElementById(n.state.boxID).value=""}))},n.onDelete=function(e){if(n.state.confirmDelete){var t=new FormData;t.append("file",JSON.stringify({parentID:n.props.parentID,commentID:e.target.id,author:"[Deleted]",body:"[Deleted]",token:n.state.userToken.jwtToken})),n.props.permaDelete?w.a.post(n.deleteUrl,t,{cancelToken:M.token}).then((function(e){n.updateComments()})):w.a.post(n.createCommentUrl,t,{cancelToken:M.token}).then((function(e){n.updateComments()})),n.setState({confirmDelete:!1})}else e.target.innerHTML="Confirm Delete",e.target.classList="deleteComment confirm",n.setState({confirmDelete:!0})},n.updateComments=function(){var e=new FormData;e.append("file",JSON.stringify({parentID:n.props.parentID})),w.a.post(n.getCommentsUrl,e,{cancelToken:M.token}).then((function(e){n.setState({comments:[],hide:n.props.hide},(function(){n.setState({comments:n.props.sortNew?e.data.reverse():e.data,hide:n.props.hide})}))})).catch((function(e){}))},n.state={boxID:Object(j.a)(),comments:[],userComment:"",hide:n.props.hide,confirmDelete:!1,searchValue:"",userToken:""},n.onReply=n.onReply.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.createCommentUrl="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadComment",this.deleteUrl="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/deleteComment",this.getCommentsUrl="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getComments",this.updateComments(),this.props.permaDelete&&this.setState({searchValue:this.props.searchValue?this.props.searchValue:""}),B().then((function(t){if(t){var a=t.Session.idToken;e.setState({userToken:a})}})).catch((function(e){return console.log(e)}))}},{key:"componentWillUnmount",value:function(){}},{key:"onReply",value:function(){this.setState({hide:!1})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"commentBox"},this.props.user&&!this.state.hide?i.a.createElement("div",{className:"commentInput"},i.a.createElement("textarea",{onChange:this.onAddComment,className:"commentTextArea",placeholder:this.props.prompt,id:this.state.boxID}),i.a.createElement("div",{className:"commentButton",onClick:this.uploadComment},"Submit")):this.props.user&&!this.props.deleted?i.a.createElement("div",{className:"replyButton",id:"reply"+this.state.boxID,onClick:this.onReply},"Reply"):"",i.a.createElement("div",{className:this.props.reply?"comments replies":"comments"},this.props.sortNew?this.state.comments.map((function(t){return i.a.createElement("div",{key:t._id,className:"commentContainer"},e.props.username===t.author?i.a.createElement("div",{className:"deleteComment",id:t.commentID,onClick:e.onDelete},"\u2716"):"",i.a.createElement(N,Object.assign({comment:t},e.props)))})):this.state.comments.filter((function(t){return t.body.toLowerCase().includes(e.state.searchValue.toLowerCase().trim())})).sort((function(e,t){var a=e.scoreUp-e.scoreDown;return t.scoreUp-t.scoreDown-a})).map((function(t){return i.a.createElement("div",{key:t._id,className:"commentContainer"},e.props.username===t.author?i.a.createElement("div",{className:"deleteComment",id:t.commentID,onClick:e.onDelete},"\u2716"):"",i.a.createElement(N,Object.assign({comment:t},e.props)))}))))}}]),a}(n.Component),G=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).id=new URLSearchParams(e.props.location.search).get("guideID"),e.url="",e.state={guideHead:{},guideSections:[],user:!1,username:"",image:"",userToken:"",references:[]},e}return Object(c.a)(a,[{key:"getSections",value:function(){var e=this;fetch(this.url).then((function(e){return e.json()})).then((function(t){e.setState({guideHead:t[0],guideSections:t[1]}),document.title=e.state.guideHead.title}))}},{key:"componentDidMount",value:function(){var e=this;this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getGuide?guideId="+this.id,this.getSections(),B().then((function(t){if(t){var a=t.Attributes[2].Value,n=t.Session.idToken;P(a).then((function(t){e.setState({username:t.username,user:!0,image:t.image,userToken:n})}))}})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"guide"},i.a.createElement("div",{id:"guideHead"},this.state.user&&this.state.username===this.state.guideHead.author?i.a.createElement("div",{className:"selfButtons"},i.a.createElement(m.b,{to:"/edit?guideID="+this.id},i.a.createElement("div",{className:"editButton"},"Edit Guide")),i.a.createElement(S,{id:this.id,token:this.state.userToken})):"",i.a.createElement("div",{id:"guideTitle"},this.state.guideHead.title),i.a.createElement("div",{id:"guideAuthor"},i.a.createElement(k,{username:this.state.guideHead.author,test:!0,key:this.state.guideHead.author})),this.state.user?i.a.createElement(y,{guide:this.state.guideHead,user:this.state.username}):i.a.createElement("div",{className:"guideVoteButtons"},i.a.createElement("div",null,i.a.createElement("span",{role:"img","aria-label":"up",className:"up"},"\ud83d\udc4d",this.state.guideHead.scoreUp||0)),i.a.createElement("div",null,i.a.createElement("span",{role:"img","aria-label":"down",className:"down"},"\ud83d\udc4e",this.state.guideHead.scoreDown||0))),this.state.guideSections.length>0&&this.state.username!==this.state.guideHead.author?i.a.createElement("div",{className:"nextButton",onClick:function(){document.getElementById(e.state.guideSections[0]._id).scrollIntoView({behavior:"smooth"})}},"Next Step"):"",!this.state.guideHead.image&&this.state.guideHead.video&&i.a.createElement(f.a,{id:"guideHeadVideo",videoId:Object(h.getVidID)(this.state.guideHead.video)}),this.state.guideHead.image&&i.a.createElement("img",{id:"guideHeadImg",src:this.state.guideHead.image,alt:this.state.guideHead.title}),i.a.createElement("div",{id:"guideHeadDesc"},this.state.guideHead.description)),i.a.createElement("div",{id:"guideSectionContainer"},this.state.guideSections.map((function(e,t,a){return i.a.createElement("div",{className:"guideSection",key:e._id,id:e._id},i.a.createElement("div",{className:"guideSectionTitle"},e.title),t<a.length-1?i.a.createElement("div",{className:"nextButton",onClick:function(){document.getElementById(a[t+1]._id).scrollIntoView({behavior:"smooth"})}},"Next Step"):"",!e.image&&e.video&&i.a.createElement(f.a,{className:"guideSectionVideo",videoId:Object(h.getVidID)(e.video)}),e.image&&i.a.createElement("img",{className:"guideSectionImg",src:e.image,alt:e.title}),i.a.createElement("div",{className:"guideSectionDesc"},e.description))}))),i.a.createElement("div",{className:"guideComments"},i.a.createElement(F,{parentID:this.id,user:this.state.user,username:this.state.username,hide:!1,submit:!1,prompt:"Leave a comment"})))}}]),a}(n.Component),J=a(24),R=a(1),_=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).url="",e.state={file:null,id:Object(j.a)()},e.onChooseFile=function(t){e.setState({file:t.target.files[0]}),document.getElementById(e.state.id).classList="unsavedButton",document.getElementById(e.state.id).innerHTML="Save Image"},e.onUploadFile=function(){var t=new FormData;t.append("file",e.state.file,e.state.file.name),w.a.post(e.url,t).then((function(t){e.props.handler(t),document.getElementById(e.state.id).classList="saveFileButton",document.getElementById(e.state.id).innerHTML="Image Saved"}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadImage"}},{key:"render",value:function(){return i.a.createElement("div",{className:"fileUpload"},i.a.createElement("input",{type:"file",accept:"image/*",onChange:this.onChooseFile}),i.a.createElement("div",{className:"saveFileButton",onClick:this.onUploadFile,id:this.state.id},"Save Image"))}}]),a}(n.Component),W=function e(t){Object(o.a)(this,e),this.guideID=t,this.sectionID=Object(j.a)(),this.title=null,this.description=null,this.image=null,this.video=null},q=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).url="",e.state={guideSection:new W(e.props.guideID),submitID:Object(j.a)()},e.onSaveGuide=function(){var t=document.getElementById(e.state.submitID);t.innerHTML="Saving....";var a=new FormData;a.append("file",JSON.stringify(e.state.guideSection)),w.a.post(e.url,a).then((function(e){t.classList="saveButton",t.innerHTML="Saved"}))},e.onAddSectionImg=function(t){e.setState((function(e){return{guideSection:Object(R.a)(Object(R.a)({},e.guideSection),{},{image:t.data.Location})}}))},e.onNotSaved=function(){var t=document.getElementById(e.state.submitID);t.classList="unsavedButton",t.innerHTML="Save Changes"},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideSection"}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"guideCreatorSection"},i.a.createElement("div",{className:"guideSectionCreatorLabel"},"Add Section Title"),i.a.createElement("input",{type:"text",className:"guideCreatorSectionInput",placeholder:"Section Title",onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideSection:Object(R.a)(Object(R.a)({},e.guideSection),{},{title:a})}})),e.onNotSaved()}}),i.a.createElement("div",{className:"guideSectionCreatorLabel"},"Add Section Description"),i.a.createElement("textarea",{type:"text",className:"guideCreatorSectionInput",placeholder:"Description",rows:"10",onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideSection:Object(R.a)(Object(R.a)({},e.guideSection),{},{description:a})}})),e.onNotSaved()}}),i.a.createElement("div",{className:"guideCreatorSectionAddImage"},i.a.createElement("div",{className:"guideSectionCreatorLabel"},"[Optional] Add Image"),this.state.guideSection.image?i.a.createElement("img",{className:"guideCreatorSectionAddImagePreview",src:this.state.guideSection.image,width:"100px",height:"100px",alt:"Preview"}):"",i.a.createElement(_,{handler:this.onAddSectionImg}),i.a.createElement("div",{className:"guideSectionCreatorLabel"},"[Optional] Add Video (takes place of image)"),i.a.createElement("input",{type:"text",className:"guideCreatorSectionInput",placeholder:"Youtube URL",onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideSection:Object(R.a)(Object(R.a)({},e.guideSection),{},{video:a})}})),e.onNotSaved()}})),i.a.createElement("div",{className:"saveButton",id:this.state.submitID,onClick:this.onSaveGuide},"Section Saved"))}}]),a}(n.Component),z="";B().then((function(e){if(e){var t=e.Attributes[2].Value;T(t).then((function(e){z=e}))}})).catch((function(e){return console.log(e)}));var Y=function e(){Object(o.a)(this,e),this.guideID=Object(j.a)(),this.author=z,this.title="",this.description="",this.image="",this.video="",this.scoreUp=0,this.scoreDown=0},$=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={guideHead:new Y,guideSections:[]},e.url="",e.onSaveGuide=function(){console.log(e.state.guideHead.author);var t=document.getElementById("saveHeadButton");t.innerHTML="Saving....";var a=new FormData;a.append("file",JSON.stringify(e.state.guideHead)),w.a.post(e.url,a).then((function(e){t.classList="saveButton",t.innerHTML="Section Saved",document.getElementById("addSectionButtonHead").style.display="block",document.getElementById("saveToolTip").style.display="none"}))},e.onAddHeadImg=function(t){e.setState((function(e){return{guideHead:Object(R.a)(Object(R.a)({},e.guideHead),{},{image:t.data.Location})}}))},e.onNotSaved=function(){var e=document.getElementById("saveHeadButton");e.classList="unsavedButton",e.innerHTML="Save Changes"},e.sectionIndex=0,e.addSection=function(){e.setState((function(t){return{guideHead:Object(R.a)({},t.guideHead),guideSections:[].concat(Object(J.a)(t.guideSections),[{key:e.sectionIndex,guideID:e.state.guideHead.guideID}])}})),e.sectionIndex++},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.title="Create Guide",this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideHead",B().then((function(t){if(t){var a=t.Attributes[2].Value;T(a).then((function(t){z=t,console.log(z),e.setState((function(e){return{guideHead:Object(R.a)(Object(R.a)({},e.guideHead),{},{author:z})}}))}))}})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"guideCreator"},i.a.createElement("div",{id:"guideCreatorHead"},i.a.createElement("div",{className:"guideCreatorLabel"},"Add Title"),i.a.createElement("input",{type:"text",className:"guideCreatorHeadInput",placeholder:"Title",onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideHead:Object(R.a)(Object(R.a)({},e.guideHead),{},{title:a})}})),e.onNotSaved()}}),i.a.createElement("div",{className:"guideCreatorLabel"},"Add Description"),i.a.createElement("textarea",{type:"text",className:"guideCreatorHeadInput",placeholder:"Description",rows:"10",onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideHead:Object(R.a)(Object(R.a)({},e.guideHead),{},{description:a})}})),e.onNotSaved()}}),i.a.createElement("div",{className:"guideCreatorHeadAddImage"},i.a.createElement("div",{className:"guideCreatorLabel"},"[Optional] Add Image"),this.state.guideHead.image?i.a.createElement("img",{className:"guideCreatorHeadAddImagePreview",src:this.state.guideHead.image,width:"100px",height:"100px",alt:"Preview"}):"",i.a.createElement(_,{handler:this.onAddHeadImg}),i.a.createElement("div",{className:"guideCreatorLabel"},"[Optional] Add Video (takes place of image)"),i.a.createElement("input",{type:"text",className:"guideCreatorHeadInput",placeholder:"Youtube URL",onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideHead:Object(R.a)(Object(R.a)({},e.guideHead),{},{video:a})}})),e.onNotSaved()}})),i.a.createElement("div",{className:"saveButton",id:"saveHeadButton",onClick:this.onSaveGuide},"Section Saved")),i.a.createElement("div",{className:"guideCreatorSections"},this.state.guideSections.map((function(e){return i.a.createElement(q,{key:e.key,guideID:e.guideID})}))),i.a.createElement("div",{className:"addSectionButton",id:"addSectionButtonHead",onClick:this.addSection,style:{display:"none"}},"Add Section"),i.a.createElement("div",{id:"saveToolTip"},"Save head section to add more"))}}]),a}(n.Component),K=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={username:"",password:"",loading:!1},e.onSubmit=function(t){e.setState({loading:!0}),t.preventDefault(),U(e.state.username,e.state.password).then((function(e){window.location.href="/"})).catch((function(t){"NotAuthorizedException"===t.name?document.getElementById("errorLabel").innerHTML="Account not yet confirmed, please check your email":document.getElementById("errorLabel").innerHTML=t.message,e.setState({loading:!1})}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"signUpForm"},i.a.createElement("div",{id:"signInHead"},"Log In"),i.a.createElement("div",{className:"errorLabel",id:"errorLabel"}),i.a.createElement("div",{className:"signInLabel"},"Username"),i.a.createElement("input",{type:"text",className:"signUpFormInput",placeholder:"Username",onChange:function(t){var a=t.target.value;e.setState((function(e){return Object(R.a)(Object(R.a)({},e),{},{username:a})}))}}),i.a.createElement("div",{className:"signInLabel"},"Password"),i.a.createElement("input",{type:"password",className:"signUpFormInput",placeholder:"Password",onChange:function(t){var a=t.target.value;e.setState((function(e){return Object(R.a)(Object(R.a)({},e),{},{password:a})}))}}),this.state.loading?i.a.createElement("img",{src:"./assets/loading.gif",alt:"Loading",className:"loadingGif"}):i.a.createElement("div",{id:"submitButton",onClick:this.onSubmit},"Submit"))}}]),a}(n.Component),Q=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.title="Login"}},{key:"render",value:function(){return i.a.createElement("div",{id:"loginPage"},i.a.createElement("div",{id:"loginPageForm"},i.a.createElement(K,null)))}}]),a}(n.Component),X=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).url="",e.userPool=new H.c({UserPoolId:"us-east-2_r9mOSgn28",ClientId:"4id2vq725vkn530cdcj355d0dt"}),e.state={email:"",username:"",password:"",invalid:!1,loading:!1},e.onSubmit=function(t){t.preventDefault(),e.setState({loading:!0}),e.userPool.signUp(e.state.username,e.state.password,[{Name:"email",Value:e.state.email}],null,(function(t,a){if(t)document.getElementById("errorLabel").innerHTML="Invalid email, username, or password",document.getElementById("errorLabelSubscript").innerHTML=t.message,e.setState({loading:!1});else{var n={username:e.state.username,email:e.state.email},i=new FormData;i.append("file",JSON.stringify(n)),w.a.post(e.url,i).then((function(e){window.location.href="/"}))}}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/createUser"}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"signUpForm"},i.a.createElement("div",{id:"signInHead"},"Log In"),i.a.createElement("div",{className:"errorLabel",id:"errorLabel"}),i.a.createElement("div",{className:"errorLabelSubscript",id:"errorLabelSubscript"}),i.a.createElement("div",{className:"signInLabel"},"Email"),i.a.createElement("input",{type:"email",className:"signUpFormInput",placeholder:"Email",onChange:function(t){var a=t.target.value;e.setState((function(e){return Object(R.a)(Object(R.a)({},e),{},{email:a})}))}}),i.a.createElement("div",{className:"signInLabel"},"Username"),i.a.createElement("input",{type:"text",className:"signUpFormInput",placeholder:"Username",onChange:function(t){var a=t.target.value;e.setState((function(e){return Object(R.a)(Object(R.a)({},e),{},{username:a})}))}}),i.a.createElement("div",{className:"signInLabel"},"Password"),i.a.createElement("input",{type:"password",className:"signUpFormInput",placeholder:"Password",onChange:function(t){var a=t.target.value;e.setState((function(e){return Object(R.a)(Object(R.a)({},e),{},{password:a})}))}}),this.state.loading?i.a.createElement("img",{src:"./assets/loading.gif",alt:"Loading",className:"loadingGif"}):i.a.createElement("div",{id:"submitButton",onClick:this.onSubmit},"Submit"))}}]),a}(n.Component),Z=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.title="Sign Up"}},{key:"render",value:function(){return i.a.createElement("div",{id:"loginPage"},i.a.createElement("div",{id:"loginPageForm"},i.a.createElement(X,null)))}}]),a}(n.Component),ee=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(j.a)(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";Object(o.a)(this,e),this.guideID=t,this.sectionID=a,this.title=n,this.description=i,this.image=r,this.video=s},te=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={guideSection:e.props.section.sectionID?e.props.section:new ee(e.props.guideID),submitID:Object(j.a)(),userToken:""},e.url="",e.deleteUrl="",e.onSaveGuide=function(){if(e.state.guideSection.title){var t=document.getElementById(e.state.submitID);t.innerHTML="Saving....";var a=new FormData;a.append("file",JSON.stringify(e.state.guideSection)),w.a.post(e.url,a).then((function(e){t.classList="saveButton",t.innerHTML="Saved"})),e.props.saved()}},e.onAddSectionImg=function(t){e.setState((function(e){return{guideSection:Object(R.a)(Object(R.a)({},e.guideSection),{},{image:t.data.Location})}}))},e.onNotSaved=function(){var t=document.getElementById(e.state.submitID);t.classList="unsavedButton",t.innerHTML="Save Changes",e.props.unsaved()},e.onDeleteSection=function(){var t=new FormData;t.append("file",JSON.stringify({guideID:e.state.guideSection.guideID,sectionID:e.state.guideSection._id,token:e.state.userToken.jwtToken})),w.a.post(e.deleteUrl,t).then((function(t){e.props.saved()}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideSection",this.deleteUrl="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/deleteGuideSection",console.log(this.state.guideSection.sectionID),this.props.section.sectionID||this.props.unsaved(),B().then((function(t){if(t){var a=t.Session.idToken;e.setState({userToken:a})}})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"guideCreatorSection"},i.a.createElement("div",{className:"deleteSection",onClick:this.onDeleteSection},"\u2716"),i.a.createElement("div",{className:"guideSectionCreatorLabel"},"Add Section Title"),i.a.createElement("input",{type:"text",className:"guideCreatorSectionInput",placeholder:"Section Title",value:this.state.guideSection.title,onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideSection:Object(R.a)(Object(R.a)({},e.guideSection),{},{title:a})}})),e.onNotSaved()}}),i.a.createElement("div",{className:"guideSectionCreatorLabel"},"Add Section Description"),i.a.createElement("textarea",{type:"text",className:"guideCreatorSectionInput",placeholder:"Description",rows:"10",value:this.state.guideSection.description||"",onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideSection:Object(R.a)(Object(R.a)({},e.guideSection),{},{description:a})}})),e.onNotSaved()}}),i.a.createElement("div",{className:"guideCreatorSectionAddImage"},i.a.createElement("div",{className:"guideSectionCreatorLabel"},"[Optional] Add Image"),this.state.guideSection.image?i.a.createElement("img",{className:"guideCreatorSectionAddImagePreview",src:this.state.guideSection.image,width:"100px",height:"100px",alt:"Preview"}):"",i.a.createElement(_,{handler:this.onAddSectionImg}),i.a.createElement("div",{className:"guideSectionCreatorLabel"},"[Optional] Add Video (takes place of image)"),i.a.createElement("input",{type:"text",className:"guideCreatorSectionInput",placeholder:"Youtube URL",value:this.state.guideSection.video||"",onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideSection:Object(R.a)(Object(R.a)({},e.guideSection),{},{video:a})}})),e.onNotSaved()}})),i.a.createElement("div",{className:"saveButton",id:this.state.submitID,onClick:this.onSaveGuide},"Section Saved"))}}]),a}(n.Component),ae="";B().then((function(e){if(e){var t=e.Attributes[2].Value;T(t).then((function(e){ae=e}))}})).catch((function(e){return console.log(e)}));var ne=function e(){Object(o.a)(this,e),this.guideID=Object(j.a)(),this.author=ae,this.title="",this.description="",this.image="",this.video="",this.scoreUp=0,this.scoreDown=0},ie=function e(){Object(o.a)(this,e),this.guideID="",this.sectionID="",this.title="",this.description="",this.image="",this.video=""},re=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={guideHead:new ne,guideSections:[],unsaved:!1},e.id=new URLSearchParams(e.props.location.search).get("guideID"),e.saveUrl="",e.getUrl="",e.onSaveGuide=function(){var t=document.getElementById("saveHeadButton");t.innerHTML="Saving....";var a=new FormData;a.append("file",JSON.stringify(e.state.guideHead)),w.a.post(e.saveUrl,a).then((function(a){t.classList="saveButton",t.innerHTML="Section Saved",e.setState({unsaved:!1})}))},e.onAddHeadImg=function(t){e.setState((function(e){return{guideHead:Object(R.a)(Object(R.a)({},e.guideHead),{},{image:t.data.Location})}}))},e.onNotSaved=function(){var t=document.getElementById("saveHeadButton");t.classList="unsavedButton",t.innerHTML="Save Changes",e.setState({unsaved:!0})},e.onSectionNotSaved=function(){e.setState({unsaved:!0})},e.onSectionSaved=function(){e.setState({unsaved:!1}),e.getSections()},e.sectionIndex=e.state.guideSections.length,e.addSection=function(){e.sectionIndex++,e.setState((function(e){return{guideHead:Object(R.a)({},e.guideHead),guideSections:[].concat(Object(J.a)(e.guideSections),[new ie])}}),(function(){}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.title="Edit Guide",this.getUrl="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getGuide?guideId="+this.id,this.saveUrl="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideHead",this.getSections()}},{key:"getSections",value:function(){var e=this;fetch(this.getUrl).then((function(e){return e.json()})).then((function(t){e.setState({guideHead:t[0],guideSections:t[1]})}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"guideCreator"},i.a.createElement(m.b,{to:"/guide?guideID="+this.state.guideHead.guideID,key:this.state.guideHead.guideID},i.a.createElement("div",{className:"backButton"}," \u2b05 Back")),i.a.createElement("div",{id:"guideCreatorHead"},i.a.createElement("div",{className:"guideCreatorLabel"},"Add Title"),i.a.createElement("input",{type:"text",className:"guideCreatorHeadInput",placeholder:"Title",value:this.state.guideHead.title,onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideHead:Object(R.a)(Object(R.a)({},e.guideHead),{},{title:a})}})),e.onNotSaved()}}),i.a.createElement("div",{className:"guideCreatorLabel"},"Add Description"),i.a.createElement("textarea",{type:"text",className:"guideCreatorHeadInput",placeholder:"Description",rows:"10",value:this.state.guideHead.description,onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideHead:Object(R.a)(Object(R.a)({},e.guideHead),{},{description:a})}})),e.onNotSaved()}}),i.a.createElement("div",{className:"guideCreatorHeadAddImage"},i.a.createElement("div",{className:"guideCreatorLabel"},"[Optional] Add Image"),this.state.guideHead.image?i.a.createElement("img",{className:"guideCreatorHeadAddImagePreview",src:this.state.guideHead.image,width:"100px",height:"100px",alt:"Preview"}):"",i.a.createElement(_,{handler:this.onAddHeadImg}),i.a.createElement("div",{className:"guideCreatorLabel"},"[Optional] Add Video (takes place of image)"),i.a.createElement("input",{type:"text",className:"guideCreatorHeadInput",placeholder:"Youtube URL",value:this.state.guideHead.video,onChange:function(t){var a=t.target.value;e.setState((function(e){return{guideHead:Object(R.a)(Object(R.a)({},e.guideHead),{},{video:a})}})),e.onNotSaved()}})),i.a.createElement("div",{className:"saveButton",id:"saveHeadButton",onClick:this.onSaveGuide},"Section Saved")),i.a.createElement("div",{className:"guideCreatorSections"},this.state.guideSections.map((function(t){return i.a.createElement(te,{key:t.sectionID?t.sectionID:e.sectionIndex,section:t,guideID:e.id,unsaved:e.onSectionNotSaved,saved:e.onSectionSaved})}))),this.state.unsaved?i.a.createElement("div",{className:"addSectionButton"},"Save other sections to add more"):i.a.createElement("div",{className:"addSectionButton",onClick:this.addSection},"Add Section"))}}]),a}(n.Component),se=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={user:!1,username:"",searchValue:""},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.title="Community Board",B().then((function(t){if(t){var a=t.Attributes[2].Value;T(a).then((function(t){e.setState({username:t,user:!0})}))}})).catch((function(e){return console.log(e)})),this.setState({searchValue:this.props.searchValue?this.props.searchValue:""})}},{key:"render",value:function(){return i.a.createElement("div",{id:"board"},i.a.createElement(F,{parentID:this.id,user:this.state.user,username:this.state.username,hide:!1,submit:!1,sortNew:!0,permaDelete:!0,prompt:"Start a discussion",searchValue:this.props.searchValue}))}}]),a}(n.Component),oe=a(41),ce=a(86),ue=a.n(ce),le=a(23),de="";de="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/";var me=function(e,t){var a=Object(n.useState)([]),i=Object(oe.a)(a,2),r=i[0],s=i[1],o=Object(n.useRef)();Object(n.useEffect)((function(){return o.current=ue()(de,{query:{roomID:e}}),o.current.on("newChatMessage",(function(a){var n=Object(R.a)(Object(R.a)({},a),{},{isCurrentUser:a.senderID===t});s((function(e){return[].concat(Object(J.a)(e),[n])}));var i=r;i.push(n),le.saveChatLog(e,i)})),function(){o.current.disconnect()}}),[e,t]);return{messages:r,send:function(e){o.current.emit("newChatMessage",{body:e,senderID:t})}}},ge=function(e){var t=me(e.roomID,e.currentUser),a=t.messages,r=t.send,s=Object(n.useState)([]),o=Object(oe.a)(s,2),c=o[0],u=o[1],l=Object(n.useRef)(null);return Object(n.useEffect)((function(){a.unshift.apply(a,Object(J.a)(e.prevLogs.filter((function(e){return""!==e}))))}),[]),Object(n.useEffect)((function(){l.current.scrollIntoView({behavior:"smooth"})}),[a,e.roomID,e.prevLogs]),i.a.createElement("div",{className:"chatBox"},i.a.createElement("div",{className:"chatBoxMessages"},a.map((function(t,a){return i.a.createElement("div",{className:t.senderID===e.currentUser?"chatMessage self":"chatMessage",key:a},i.a.createElement(m.b,{to:"/profile?user="+t.senderID},i.a.createElement("div",{className:"messageUsername"},t.senderID,": ")),t.body)})),i.a.createElement("div",{id:"messagesBottom",ref:l})),i.a.createElement("div",{className:"chatBoxInputBox"},i.a.createElement("input",{type:"text",onChange:function(e){u(e.target.value)},placeholder:"send message...",className:"chatBoxInput",id:"input"}),i.a.createElement("button",{onClick:function(){c&&"string"===typeof c&&(r(c),u(""),document.getElementById("input").value="")}},"Send")))},he=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).id=new URLSearchParams(e.props.location.search).get("user"),e.defaultUser={username:"User Not Found",email:"",image:""},e.state={user:"",currentUser:"",id:"",prevLogs:[""]},e.url="",e.listen="",e.getLogs=Object(x.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,a){var n="";n="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getChatLog";var i=new FormData;i.append("file",JSON.stringify({roomID:e.state.id})),w.a.post(n,i).then((function(a){e.setState({prevLogs:a.data.chatLog},(function(){t()}))})).catch((function(e){a(e)}))}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),e.onImageChange=function(t){var a={username:e.state.user.username,email:e.state.user.email,image:t.data.Location},n=new FormData;n.append("file",JSON.stringify(a)),w.a.post(e.url,n).then((function(t){e.setState({user:t.data})}))},e.defaultImage="https://guia-images.s3-us-west-1.amazonaws.com/Full-Green-Tree-984x1024.png",e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/createUser",this.listen=this.props.history.listen((function(t,a){e.setID(t),window.location.reload()})),this.setID()}},{key:"componentWillUnmount",value:function(){this.listen()}},{key:"setID",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.location;this.setState({id:new URLSearchParams(t.search).get("user")},(function(){e.getLogs().then((function(){e.getUserData()}))}))}},{key:"getUserData",value:function(){var e=this;document.title=this.state.id,V(this.state.id).then((function(t){e.setState({user:t||e.defaultUser}),B().then((function(t){if(t){var a=t.Attributes[2].Value;T(a).then((function(t){e.setState({currentUser:t})}))}})).catch((function(e){return console.log(e)}))}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"profileContainer"},i.a.createElement("div",{id:"profile"},i.a.createElement("img",{className:"profileImage",src:this.state.user.image||this.defaultImage,alt:this.state.user.username}),this.state.currentUser===this.id?i.a.createElement(_,{handler:this.onImageChange}):"",i.a.createElement("div",{className:"profileUsername"},this.state.user.username),i.a.createElement("div",{className:"profileEmail"},this.state.user.email)),i.a.createElement(ge,{roomID:this.state.id,currentUser:this.state.currentUser,prevLogs:this.state.prevLogs,key:this.state.prevLogs.length}))}}]),a}(n.Component),pe=a(6),ve=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).url="",n.state={users:[],search:""},n.onSearch=n.onSearch.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.title="Users",this.url="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUsers",this.getAll()}},{key:"getAll",value:function(){var e=this;pe.get(this.url).then((function(t){e.setState({users:t.data})}))}},{key:"onSearch",value:function(e){this.setState({search:e.target.value})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"usersPage"},i.a.createElement("input",{className:"userSearch",placeholder:"\ud83d\udd0e Search Users",type:"text",onChange:this.onSearch}),this.state.users.filter((function(t){return t.username.toLowerCase().includes(e.state.search.toLowerCase().trim())})).map((function(e){return i.a.createElement("div",{className:"userPreview",key:e.username},i.a.createElement(k,{username:e.username}))})))}}]),a}(n.Component),fe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={user:!1,username:"",searchValue:""},n.onSearch=n.onSearch.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"hide",value:function(e){this.setState({homeLinks:!0})}},{key:"componentDidMount",value:function(){var e=this;B().then((function(t){if(t){var a=t.Attributes[2].Value;T(a).then((function(t){e.setState({username:t})})),e.setState({user:!0})}})).catch((function(e){return console.log(e)}))}},{key:"onSearch",value:function(e){this.setState({searchValue:e.target.value},(function(){}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"container"},i.a.createElement("div",{id:"mainSidebar"},i.a.createElement(m.b,{to:"/"},i.a.createElement("img",{src:"./assets/GuiaLogo1.svg",alt:"Logo",id:"mainLogo"})),"/"===this.props.location.pathname?i.a.createElement("input",{id:"searchBar",type:"text",onChange:this.onSearch,placeholder:"\ud83d\udd0d Search Guides"}):"",this.state.user?i.a.createElement("div",{className:"signedInButtons"},i.a.createElement("div",{className:"sidebarButton bold profileButton"},i.a.createElement(k,{username:this.state.username,key:this.state.username})),i.a.createElement(m.b,{to:"/"},i.a.createElement("div",{className:"sidebarButton bold"},i.a.createElement("span",{role:"img","aria-label":"Home Page"}," ","\ud83c\udfe0"," "),"Guides")),i.a.createElement(m.b,{to:"/createGuide"},i.a.createElement("div",{className:"sidebarButton bold"},i.a.createElement("span",{role:"img","aria-label":"Create Guide"}," ","\ud83d\udcdd"," "),"Create Guide")),i.a.createElement(m.b,{to:"/board"},i.a.createElement("div",{className:"sidebarButton bold"},i.a.createElement("span",{role:"img","aria-label":"Community Board"}," ","\ud83d\udcf0"," "),"Community Board")),i.a.createElement(m.b,{to:"/users"},i.a.createElement("div",{className:"sidebarButton bold"},i.a.createElement("span",{role:"img","aria-label":"Community Board"}," ","\ud83d\udd0e"," "),"Search Users")),i.a.createElement("div",{className:"sidebarButton signOutButton",onClick:A},"\u2b05 Sign Out")):i.a.createElement("div",{className:"signInButtons"},i.a.createElement(m.b,{to:"/"},i.a.createElement("div",{className:"sidebarButton bold"},i.a.createElement("span",{role:"img","aria-label":"Home Page"}," ","\ud83c\udfe0"," "),"Guides")),i.a.createElement(m.b,{to:"/login"},i.a.createElement("div",{className:"sidebarButton bold"},i.a.createElement("span",{role:"img","aria-label":"Login"},"\ud83d\udeaa"),"\xa0 Login")),i.a.createElement(m.b,{to:"/signup"},i.a.createElement("div",{className:"sidebarButton bold"},i.a.createElement("span",{role:"img","aria-label":"Sign Up"},"\u2795")," Sign Up")))),i.a.createElement("div",{id:"mainContainer"},i.a.createElement(g.c,null,i.a.createElement(g.a,{path:"/profile",render:function(e){return i.a.createElement(he,e)}}),i.a.createElement(g.a,{path:"/users",render:function(e){return i.a.createElement(ve,e)}}),i.a.createElement(g.a,{path:"/edit",render:function(e){return i.a.createElement(re,e)}}),i.a.createElement(g.a,{path:"/login",render:function(e){return i.a.createElement(Q,e)}}),i.a.createElement(g.a,{path:"/signup",render:function(e){return i.a.createElement(Z,e)}}),i.a.createElement(g.a,{path:"/createGuide",render:function(e){return i.a.createElement($,e)}}),i.a.createElement(g.a,{path:"/guide",render:function(e){return i.a.createElement(G,e)}}),i.a.createElement(g.a,{path:"/board",render:function(t){return i.a.createElement(se,Object.assign({},t,{searchValue:e.state.searchValue}))}}),i.a.createElement(g.a,{path:"/",render:function(t){return i.a.createElement(v,Object.assign({},t,{searchValue:e.state.searchValue,Hide:function(t){return e.hide(t)}}))}}))))}}]),a}(n.Component),be=Object(g.g)(fe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(m.a,null,i.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},23:function(e,t,a){"use strict";a.r(t),a.d(t,"getVidID",(function(){return r})),a.d(t,"deleteGuide",(function(){return s})),a.d(t,"saveChatLog",(function(){return o}));var n=a(6),i=a.n(n),r=function(e){var t=e.replace("https://","").trim();return t.includes("youtu.be")?t.split("/")[1]:t.split("?v=")[1].split("&")[0]},s=function(e,t){fetch("http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/deleteGuide?guideId="+e+"&token="+t).then((function(e){}))},o=function(e,t){var a="";a="http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadChatLog";var n=new FormData;n.append("file",JSON.stringify({roomID:e,chatLog:t})),i.a.post(a,n).then()}},87:function(e,t,a){e.exports=a(157)},92:function(e,t,a){},93:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.9dd1dd94.chunk.js.map