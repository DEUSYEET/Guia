{"version":3,"sources":["components/guidePreview.jsx","pages/Home.jsx","components/deleteButton.jsx","components/voteButtons.jsx","components/commentVoteButtons.jsx","components/ProfilePic.jsx","components/Comment.jsx","components/Authentication.jsx","components/CommentBox.jsx","pages/Guide.jsx","components/fileUpload.jsx","components/guideSectionCreator.jsx","pages/CreateGuide.jsx","components/loginForm.jsx","pages/LoginPage.jsx","components/signUpForm.jsx","pages/SignUpPage.jsx","components/guideSectionEditor.jsx","pages/EditGuide.jsx","pages/Board.jsx","components/ChatTools.jsx","components/ChatBox.jsx","pages/Profile.jsx","App.js","serviceWorker.js","index.js","tools.js"],"names":["GuidePreview","guide","props","url","video","videoThumbnail","getVidID","className","this","image","src","alt","title","author","description","role","aria-label","scoreUp","scoreDown","Component","Home","state","guides","getAll","fetch","then","res","json","data","setState","id","sort","a","b","aScore","filter","toLowerCase","includes","searchValue","trim","map","to","guideID","key","confirm","DeleteButton","history","useHistory","onClick","e","deleteGuide","token","jwtToken","window","push","go","target","innerHTML","prompt","VoteButtons","updateScores","formData","FormData","vote","voteType","classList","user","append","JSON","stringify","axios","post","upUsers","onVote","downUsers","CommentVoteButtons","comment","commentID","source","CancelToken","ProfilePic","getImage","username","cancelToken","defaultImage","test","Comment","body","parentID","hide","reply","deleted","pool","CognitoUserPool","UserPoolId","ClientId","auth","Username","Password","Promise","resolve","reject","CognitoUser","Pool","AuthenticationDetails","authenticateUser","onSuccess","onFailure","err","newPasswordRequired","session","getCurrentUser","getSession","getUserAttributes","att","Session","Attributes","logout","signOut","location","href","getUsername","email","catch","getUserDataFromEmail","getUserDataFromUsername","CommentBox","createCommentUrl","getCommentsUrl","deleteUrl","onAddComment","content","value","userComment","uploadComment","v4","updateComments","document","getElementById","boxID","onDelete","confirmDelete","userToken","permaDelete","comments","sortNew","reverse","onReply","bind","val","idToken","console","log","onChange","placeholder","_id","Guide","URLSearchParams","search","get","guideHead","guideSections","getSections","Value","videoId","section","submit","FileUpload","file","onChooseFile","evt","files","onUploadFile","name","handler","type","accept","guideSection","sectionID","CreateGuideSection","submitID","onSaveGuide","button","onAddSectionImg","prevState","Location","onNotSaved","width","height","CreateGuide","style","display","onAddHeadImg","sectionIndex","addSection","LogInForm","password","loading","onSubmit","preventDefault","message","LoginPage","SignUpForm","userPool","invalid","signUp","Name","SignUpPage","Section","EditGuideSection","saved","unsaved","onDeleteSection","EditGuide","saveUrl","getUrl","onSectionNotSaved","onSectionSaved","length","Board","tools","require","ChatTools","roomID","currentUser","useState","messages","updateMessages","ref","useRef","useEffect","current","socketIOClient","query","on","incoming","isCurrentUser","senderID","newLog","saveChatLog","disconnect","send","emit","ChatBox","newMessage","updateSendMessage","messagesBottomRef","unshift","prevLogs","scrollIntoView","behavior","i","Profile","defaultUser","listen","getLogs","chatLog","onImageChange","action","setID","reload","setTransition","getUserData","App","onSearch","homeLinks","pathname","path","render","Hide","withRouter","Boolean","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister","error","cleanUrl","replace","split","isTransitioning"],"mappings":"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","file":"static/js/main.9f1a6676.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { getVidID } from \"../tools\";\r\n\r\n\r\nclass GuidePreview extends Component {\r\n  guide = this.props.guide;\r\n  url = this.guide.video;\r\n  videoThumbnail = (this.url ? (\"https://img.youtube.com/vi/\" + getVidID(this.url) + \"/0.jpg\") : \"\");\r\n\r\n    \r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"guidePreview\">\r\n        {!this.guide.image && this.url && (\r\n          <div className=\"guidePreviewImgBox\">\r\n            <img\r\n              className=\"guidePreviewImg\"\r\n              src={this.videoThumbnail}\r\n              alt={this.guide.title}\r\n            ></img>\r\n          </div>\r\n        )}\r\n        {this.guide.image && (\r\n          <div className=\"guidePreviewImgBox\">\r\n            <img\r\n              className=\"guidePreviewImg\"\r\n              src={this.guide.image}\r\n              alt={this.guide.title}\r\n            />\r\n          </div>\r\n        )}\r\n        <div className=\"guidePreviewContent\">\r\n          <div className=\"guidePreviewTitle\">{this.guide.title}</div>\r\n          <div className=\"guidePreviewAuthor\">{this.guide.author || \"Anonymous\"}</div>\r\n          <div className=\"guidePreviewDesc\">{this.guide.description}</div>\r\n          <div className=\"guidePreviewScore\"> <span role=\"img\" aria-label=\"up\">üëç</span>{this.guide.scoreUp || 0} /<span role=\"img\" aria-label=\"down\"> üëé</span>{this.guide.scoreDown || 0}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default GuidePreview;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport GuidePreview from \"../components/guidePreview\";\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      guides: [],\r\n    };\r\n  }\r\n  url = \"\";\r\n\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/getAll\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getAll\";\r\n    }\r\n    this.getAll();\r\n  }\r\n\r\n  getAll() {\r\n    // console.log(url)\r\n    fetch(this.url)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        // console.log(data);\r\n        this.setState({\r\n          guides: data,\r\n        });\r\n        // console.log(this.state.guides);\r\n      });\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"homePage\">\r\n\r\n        <div id=\"homeGuideContainer\">\r\n          {this.state.guides\r\n            .sort((a, b) => {\r\n              let aScore = a.scoreUp - a.scoreDown;\r\n              let bScore = b.scoreUp - b.scoreDown;\r\n              return bScore - aScore;\r\n            })\r\n            .filter((guide) => {\r\n              return guide.title\r\n                .toLowerCase()\r\n                .includes(this.props.searchValue.toLowerCase().trim());\r\n            })\r\n            .map((guide) => (\r\n              <Link to={\"/guide?guideID=\" + guide.guideID} key={guide.guideID}>\r\n                <GuidePreview guide={guide} />\r\n              </Link>\r\n            ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { deleteGuide } from \"../tools\";\r\n\r\nlet confirm = false;\r\n\r\nconst DeleteButton = (props) => {\r\n  let history = useHistory();\r\n  function onDelete(e) {\r\n    if (confirm) {\r\n      deleteGuide(props.id, props.token.jwtToken, window);\r\n      history.push(\"/\");\r\n      history.go();\r\n      confirm = false;\r\n    } else {\r\n      e.target.innerHTML = \"Confirm Delete\";\r\n      confirm = true;\r\n    }\r\n    // console.log(props.id)\r\n  }\r\n\r\n  return (\r\n    <div className=\"deleteButton\" onClick={onDelete}>\r\n        {props.prompt ? props.prompt : \"Delete Guide\"}\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default DeleteButton;\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nclass VoteButtons extends Component {\r\n  url = \"\";\r\n  state = {\r\n    guide: this.props.guide,\r\n    scoreUp: 0,\r\n    scoreDown: 0,\r\n  };\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/voteGuide\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/voteGuide\";\r\n    }\r\n    // console.log(this.url);\r\n    this.updateScores(this.state.guide);\r\n  }\r\n\r\n  onVote(e) {\r\n    let formData = new FormData();\r\n    let vote = {\r\n      guideID: this.state.guide.guideID,\r\n      voteType: e.target.classList[0],\r\n      user: this.props.user,\r\n    };\r\n    // console.log(vote);\r\n    formData.append(\"file\", JSON.stringify(vote));\r\n    axios.post(this.url, formData).then((res) => {\r\n      //   console.log(res);\r\n      this.setState({\r\n        guide: res.data,\r\n      });\r\n      this.updateScores(res.data);\r\n      //   this.forceUpdate();\r\n    });\r\n  }\r\n\r\n  updateScores(guide) {\r\n    this.setState({\r\n      scoreUp: guide.scoreUp,\r\n      scoreDown: guide.scoreDown,\r\n    });\r\n    // console.log(guide.scoreUp,guide.scoreDown,this.state)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"guideVoteButtons\">\r\n        <div\r\n          className={\r\n            this.state.guide.upUsers.includes(this.props.user)\r\n              ? \"guideUpvote voted\"\r\n              : \"guideUpvote\"\r\n          }\r\n        >\r\n          <span\r\n            role=\"img\"\r\n            aria-label=\"up\"\r\n            className=\"up\"\r\n            onClick={(e) => this.onVote(e)}\r\n          >\r\n            üëç\r\n            {this.state.scoreUp || 0}\r\n          </span>\r\n        </div>\r\n        <div\r\n          className={\r\n            this.state.guide.downUsers.includes(this.props.user)\r\n              ? \"guideDownvote voted\"\r\n              : \"guideDownvote\"\r\n          }\r\n        >\r\n          <span\r\n            role=\"img\"\r\n            aria-label=\"down\"\r\n            className=\"down\"\r\n            onClick={(e) => this.onVote(e)}\r\n          >\r\n            üëé\r\n            {this.state.guide.scoreDown || 0}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default VoteButtons;\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nclass CommentVoteButtons extends Component {\r\n  url = \"\";\r\n  state = {\r\n    comment: this.props.comment,\r\n    scoreUp: 0,\r\n    scoreDown: 0,\r\n  };\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/voteComment\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/voteComment\";\r\n    }\r\n    // console.log(this.url);\r\n    this.updateScores(this.state.comment);\r\n  }\r\n\r\n  onVote(e) {\r\n    let formData = new FormData();\r\n    let vote = {\r\n      commentID: this.state.comment.commentID,\r\n      voteType: e.target.classList[0],\r\n      user: this.props.user,\r\n    };\r\n    // console.log(vote);\r\n    formData.append(\"file\", JSON.stringify(vote));\r\n    axios.post(this.url, formData).then((res) => {\r\n      // console.log(res.data);\r\n      this.setState({\r\n        comment: res.data,\r\n        scoreUp: res.data.scoreUp,\r\n        scoreDown: res.data.scoreDown,\r\n      });\r\n      this.updateScores(res.data);\r\n      //   this.forceUpdate();\r\n    });\r\n  }\r\n\r\n  updateScores(comment) {\r\n    this.setState({\r\n      scoreUp: comment.scoreUp,\r\n      scoreDown: comment.scoreDown,\r\n    });\r\n    // console.log(this.state.comment.upUsers,this.state.comment.downUsers)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"guideVoteButtons\">\r\n        <div\r\n          className={\r\n            this.state.comment.upUsers.includes(this.props.user)\r\n              ? \"guideUpvote voted\"\r\n              : \"guideUpvote\"\r\n          }\r\n        >\r\n          <span\r\n            role=\"img\"\r\n            aria-label=\"up\"\r\n            className=\"up\"\r\n            onClick={(e) => this.onVote(e)}\r\n          >\r\n            üëç\r\n            {this.state.scoreUp || 0}\r\n          </span>\r\n        </div>\r\n        <div\r\n          className={\r\n            this.state.comment.downUsers.includes(this.props.user)\r\n              ? \"guideDownvote voted\"\r\n              : \"guideDownvote\"\r\n          }\r\n        >\r\n          <span\r\n            role=\"img\"\r\n            aria-label=\"down\"\r\n            className=\"down\"\r\n            onClick={(e) => this.onVote(e)}\r\n          >\r\n            üëé\r\n            {this.state.scoreDown || 0}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default CommentVoteButtons;\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\n// import { Link } from \"react-router-dom\";\r\n// import { session, getUserData } from \"../components/Authentication\";\r\nconst cancelToken = axios.CancelToken;\r\nconst source = cancelToken.source();\r\n\r\n\r\n// const \r\n\r\n\r\nclass ProfilePic extends Component {\r\n  url = \"\";\r\n  state = {\r\n    image: \"\",\r\n  };\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/getUserImage\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUserImage\";\r\n    }\r\n    this.getImage();\r\n    if (this.props.test) {\r\n      // console.log(this.props.username);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // source.cancel();\r\n  }\r\n\r\n  getImage = () => {\r\n    if (this.props.username) {\r\n      let formData = new FormData();\r\n      formData.append(\"file\", JSON.stringify(this.props.username));\r\n      axios\r\n        .post(this.url, formData, {\r\n          cancelToken: source.token,\r\n        })\r\n        .then((res) => {\r\n          this.setState({\r\n            image: res.data\r\n              ? res.data.image\r\n              : \"https://guia-images.s3-us-west-1.amazonaws.com/Full-Green-Tree-984x1024.png\",\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  defaultImage =\r\n    \"https://guia-images.s3-us-west-1.amazonaws.com/Full-Green-Tree-984x1024.png\";\r\n\r\n  render() {\r\n    return this.props.username !== \"[Deleted]\" ? (\r\n      <Link to={\"/profile?user=\" + this.props.username}>\r\n        <div className=\"profilePic\">\r\n          <img\r\n            src={this.state.image || this.defaultImage}\r\n            className=\"userImage\"\r\n            alt={this.props.username}\r\n            onClick={this.getImage}\r\n          ></img>\r\n          <div className=\"profilePicUsername\">{this.props.username}</div>\r\n        </div>\r\n      </Link>\r\n    ) : (\r\n      <div className=\"profilePic\">\r\n        <img\r\n          src={this.state.image || this.defaultImage}\r\n          className=\"userImage\"\r\n          alt={this.props.username}\r\n          onClick={this.getImage}\r\n        ></img>\r\n        <div className=\"profilePicUsername\">{this.props.username}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProfilePic;\r\n","import React, { Component } from \"react\";\r\nimport CommentBox from \"../components/CommentBox\";\r\nimport CommentVoteButtons from \"./commentVoteButtons\";\r\nimport ProfilePic from \"./ProfilePic\";\r\n\r\nclass Comment extends Component {\r\n  comment = this.props.comment;\r\n  render() {\r\n    return (\r\n      <div className=\"comment\">\r\n      <div className=\"commentHead\">\r\n      <ProfilePic username={this.comment.author} />\r\n      </div>\r\n        <div className=\"commentBody\">{this.comment.body}</div>\r\n        {this.comment.author === \"[Deleted]\" ? (\r\n          \"\"\r\n        ) : (\r\n          <div className=\"commentInteractions\">\r\n          {this.props.user?(\r\n\r\n            <CommentVoteButtons\r\n              comment={this.comment}\r\n              user={this.props.username}\r\n            />\r\n          ): ( <div className=\"guideVoteButtons\">\r\n              <div>\r\n                <span role=\"img\" aria-label=\"up\" className=\"up\">\r\n                  üëç\r\n                  {this.props.comment.scoreUp || 0}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <span role=\"img\" aria-label=\"down\" className=\"down\">\r\n                  üëé\r\n                  {this.props.comment.scoreDown || 0}\r\n                </span>\r\n              </div>\r\n            </div>)}\r\n          </div>\r\n        )}\r\n        <CommentBox\r\n          parentID={this.comment.commentID}\r\n          user={this.props.user}\r\n          username={this.props.username}\r\n          hide={true}\r\n          reply={true}\r\n          deleted = {this.comment.author === \"[Deleted]\"}\r\n          prompt=\"Leave a reply\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Comment;\r\n","import {\r\n  CognitoUser,\r\n  AuthenticationDetails,\r\n  CognitoUserPool,\r\n} from \"amazon-cognito-identity-js\";\r\nimport axios from \"axios\";\r\n\r\nconst pool = new CognitoUserPool({\r\n  UserPoolId: \"us-east-2_r9mOSgn28\",\r\n  ClientId: \"4id2vq725vkn530cdcj355d0dt\",\r\n});\r\n\r\nconst auth = async (Username, Password) =>\r\n  await new Promise((resolve, reject) => {\r\n    const user = new CognitoUser({\r\n      Username,\r\n      Pool: pool,\r\n    });\r\n    const auth = new AuthenticationDetails({\r\n      Username,\r\n      Password,\r\n    });\r\n\r\n    user.authenticateUser(auth, {\r\n      onSuccess: (data) => {\r\n        resolve(data);\r\n      },\r\n      onFailure: (err) => {\r\n        reject(err);\r\n      },\r\n      newPasswordRequired: (data) => {\r\n        resolve(data);\r\n      },\r\n    });\r\n  });\r\n\r\nconst session = async () =>\r\n  await new Promise((resolve, reject) => {\r\n    const user = pool.getCurrentUser();\r\n    if (user) {\r\n      user.getSession((err, session) => {\r\n        if (err) {\r\n          reject(err);\r\n        } else {\r\n          user.getUserAttributes((err, att) => {\r\n            if (err) {\r\n              reject(err);\r\n            } else {\r\n              resolve({ Session: session, Attributes: att });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      reject();\r\n    }\r\n  });\r\n\r\nconst logout = () => {\r\n  const user = pool.getCurrentUser();\r\n  if (user) {\r\n    user.signOut();\r\n    window.location.href = \"/\";\r\n  }\r\n};\r\n\r\nconst getUsername = async (email) =>\r\n  await new Promise((resolve, reject) => {\r\n    let url = \"\";\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      url = \"http://localhost:8080/getUser\";\r\n    } else {\r\n      url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUser\";\r\n    }\r\n\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify({ email: email }));\r\n\r\n    axios\r\n      .post(url, formData)\r\n      .then((res) => {\r\n        let username = res.data.username;\r\n        // console.log(username);\r\n        resolve(username);\r\n      })\r\n      .catch((err) => reject(err));\r\n  });\r\n\r\nconst getUserDataFromEmail = async (email) =>\r\n  await new Promise((resolve, reject) => {\r\n    let url = \"\";\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      url = \"http://localhost:8080/getUser\";\r\n    } else {\r\n      url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUser\";\r\n    }\r\n\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify({ email: email }));\r\n\r\n    axios\r\n      .post(url, formData)\r\n      .then((res) => {\r\n        resolve(res.data);\r\n      })\r\n      .catch((err) => reject(err));\r\n  });\r\n\r\nconst getUserDataFromUsername = async (username) =>\r\n  await new Promise((resolve, reject) => {\r\n    let url = \"\";\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      url = \"http://localhost:8080/getUserFromName\";\r\n    } else {\r\n      url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getUserFromName\";\r\n    }\r\n\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify({ username: username }));\r\n\r\n    axios\r\n      .post(url, formData)\r\n      .then((res) => {\r\n        resolve(res.data);\r\n      })\r\n      .catch((err) => reject(err));\r\n  });\r\n\r\nexport {\r\n  auth,\r\n  session,\r\n  logout,\r\n  getUsername,\r\n  getUserDataFromEmail,\r\n  getUserDataFromUsername,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport Comment from \"./Comment\";\r\nimport axios from \"axios\";\r\nimport { v4 } from \"uuid\";\r\nimport { session } from \"./Authentication\";\r\n\r\nconst cancelToken = axios.CancelToken;\r\nconst source = cancelToken.source();\r\n\r\nclass CommentBox extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      // box: {},\r\n      boxID: v4(),\r\n      comments: [],\r\n      userComment: \"\",\r\n      hide: this.props.hide,\r\n      confirmDelete: false,\r\n      searchValue: \"\",\r\n      userToken: \"\",\r\n    };\r\n    this.onReply = this.onReply.bind(this);\r\n    //   this.onDelete = this.onDelete.bind(this)\r\n  }\r\n\r\n  createCommentUrl = \"\";\r\n  getCommentsUrl = \"\";\r\n  deleteUrl = \"\";\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.createCommentUrl = \"http://localhost:8080/uploadComment\";\r\n      this.deleteUrl = \"http://localhost:8080/deleteComment\";\r\n      this.getCommentsUrl = \"http://localhost:8080/getComments\";\r\n    } else {\r\n      this.createCommentUrl =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadComment\";\r\n      this.deleteUrl =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/deleteComment\";\r\n      this.getCommentsUrl =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getComments\";\r\n    }\r\n    // console.log(\"mounting\");\r\n    this.updateComments();\r\n    if (this.props.permaDelete) {\r\n      // console.log(\"Box      ----->\", this.props.searchValue);\r\n      this.setState({\r\n        searchValue: this.props.searchValue ? this.props.searchValue : \"\",\r\n      });\r\n    }\r\n    session()\r\n      .then((val) => {\r\n        if (val) {\r\n          let  token  = val.Session.idToken;\r\n          this.setState({\r\n            userToken: token,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // source.cancel();\r\n  }\r\n  onAddComment = (e) => {\r\n    let content = e.target.value;\r\n    this.setState({\r\n      userComment: content,\r\n    });\r\n  };\r\n\r\n  uploadComment = () => {\r\n    let formData = new FormData();\r\n    formData.append(\r\n      \"file\",\r\n      JSON.stringify({\r\n        parentID: this.props.parentID,\r\n        commentID: v4(),\r\n        author: this.props.username,\r\n        body: this.state.userComment,\r\n      })\r\n    );\r\n    axios\r\n      .post(this.createCommentUrl, formData, {\r\n        cancelToken: source.token,\r\n      })\r\n      .then((res) => {\r\n        this.updateComments();\r\n        document.getElementById(this.state.boxID).value = \"\";\r\n      });\r\n  };\r\n\r\n  onDelete = (e) => {\r\n    if (this.state.confirmDelete) {\r\n      let formData = new FormData();\r\n      formData.append(\r\n        \"file\",\r\n        JSON.stringify({\r\n          parentID: this.props.parentID,\r\n          commentID: e.target.id,\r\n          author: \"[Deleted]\",\r\n          body: \"[Deleted]\",\r\n          token:this.state.userToken.jwtToken,\r\n          // scoreDown: -1000,\r\n        })\r\n      );\r\n      // console.log(this.props.permaDelete);\r\n      if (this.props.permaDelete) {\r\n        axios\r\n          .post(this.deleteUrl, formData, {\r\n            cancelToken: source.token,\r\n          })\r\n          .then((res) => {\r\n            //   console.log(\"delete\");\r\n            this.updateComments();\r\n          });\r\n      } else {\r\n        axios\r\n          .post(this.createCommentUrl, formData, {\r\n            cancelToken: source.token,\r\n          })\r\n          .then((res) => {\r\n            //   console.log(\"delete\");\r\n            this.updateComments();\r\n          });\r\n      }\r\n      this.setState({\r\n        confirmDelete: false,\r\n      });\r\n    } else {\r\n      e.target.innerHTML = \"Confirm Delete\";\r\n      e.target.classList = \"deleteComment confirm\";\r\n      this.setState({\r\n        confirmDelete: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  updateComments = () => {\r\n    let formData = new FormData();\r\n    formData.append(\r\n      \"file\",\r\n      JSON.stringify({\r\n        parentID: this.props.parentID,\r\n      })\r\n    );\r\n    axios\r\n      .post(this.getCommentsUrl, formData, {\r\n        cancelToken: source.token,\r\n      })\r\n      .then((res) => {\r\n        this.setState(\r\n          {\r\n            comments: [],\r\n            hide: this.props.hide,\r\n          },\r\n          () => {\r\n            this.setState({\r\n              comments: this.props.sortNew ? res.data.reverse() : res.data,\r\n              hide: this.props.hide,\r\n            });\r\n          }\r\n        );\r\n      })\r\n      .catch((err) => {});\r\n  };\r\n\r\n  onReply() {\r\n    this.setState({\r\n      hide: false,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"commentBox\">\r\n        {this.props.user && !this.state.hide ? (\r\n          <div className=\"commentInput\">\r\n            <textarea\r\n              onChange={this.onAddComment}\r\n              className=\"commentTextArea\"\r\n              placeholder={this.props.prompt}\r\n              id={this.state.boxID}\r\n            />\r\n            <div className=\"commentButton\" onClick={this.uploadComment}>\r\n              Submit\r\n            </div>\r\n          </div>\r\n        ) : this.props.user && !this.props.deleted ? (\r\n          <div\r\n            className=\"replyButton\"\r\n            id={\"reply\" + this.state.boxID}\r\n            onClick={this.onReply}\r\n          >\r\n            Reply\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        <div className={this.props.reply ? \"comments replies\" : \"comments\"}>\r\n          {this.props.sortNew\r\n            ? this.state.comments.map((comment) => (\r\n                <div key={comment._id} className=\"commentContainer\">\r\n                  {this.props.username === comment.author ? (\r\n                    <div\r\n                      className=\"deleteComment\"\r\n                      id={comment.commentID}\r\n                      onClick={this.onDelete}\r\n                    >\r\n                      ‚úñ\r\n                    </div>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                  <Comment comment={comment} {...this.props} />\r\n                </div>\r\n              ))\r\n            : this.state.comments\r\n                .filter((comment) => {\r\n                  return comment.body\r\n                    .toLowerCase()\r\n                    .includes(this.state.searchValue.toLowerCase().trim());\r\n                })\r\n                .sort((a, b) => {\r\n                  let aScore = a.scoreUp - a.scoreDown;\r\n                  let bScore = b.scoreUp - b.scoreDown;\r\n                  return bScore - aScore;\r\n                })\r\n                .map((comment) => (\r\n                  <div key={comment._id} className=\"commentContainer\">\r\n                    {this.props.username === comment.author ? (\r\n                      <div\r\n                        className=\"deleteComment\"\r\n                        id={comment.commentID}\r\n                        onClick={this.onDelete}\r\n                      >\r\n                        ‚úñ\r\n                      </div>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                    <Comment comment={comment} {...this.props} />\r\n                  </div>\r\n                ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default CommentBox;\r\n","import React, { Component } from \"react\";\r\nimport YouTube from \"react-youtube\";\r\nimport DeleteButton from \"../components/deleteButton\";\r\nimport VoteButtons from \"../components/voteButtons\";\r\nimport CommentBox from \"../components/CommentBox\";\r\nimport { session, getUserDataFromEmail } from \"../components/Authentication\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ProfilePic from \"../components/ProfilePic\";\r\nimport { getVidID } from \"../tools\";\r\n\r\n\r\nclass Guide extends Component {\r\n  id = new URLSearchParams(this.props.location.search).get(\"guideID\");\r\n  url = \"\";\r\n\r\n  state = {\r\n    guideHead: {},\r\n    guideSections: [],\r\n    user: false,\r\n    username: \"\",\r\n    image:\"\",\r\n    userToken: \"\",\r\n  };\r\n\r\n\r\n\r\n  getSections() {\r\n    // console.log(this.url);\r\n    fetch(this.url)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        // console.log(data);\r\n        this.setState({\r\n          guideHead: data[0],\r\n          guideSections: data[1],\r\n        });\r\n        // console.log(this.state);\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/getGuide?guideId=\" + this.id;\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getGuide?guideId=\" +\r\n        this.id;\r\n    }\r\n    // console.log(this.url)\r\n    // console.log(this.props.history)\r\n    this.getSections();\r\n    session()\r\n      .then((val) => {\r\n        if (val) {\r\n          let { Value } = val.Attributes[2];\r\n          let  token  = val.Session.idToken;\r\n          getUserDataFromEmail(Value).then((data) => {\r\n            this.setState({\r\n              username: data.username,\r\n              user: true,\r\n              image:data.image,\r\n              userToken: token,\r\n            });\r\n            // console.log(this.state.username);\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"guide\">\r\n        <div id=\"guideHead\">\r\n          {this.state.user &&\r\n          this.state.username === this.state.guideHead.author ? (\r\n            <div className=\"selfButtons\">\r\n              <Link to={\"/edit?guideID=\" + this.id}>\r\n                <div className=\"editButton\">Edit Guide</div>\r\n              </Link>\r\n              \r\n              <DeleteButton id={this.id} token={this.state.userToken} />\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <div id=\"guideTitle\">{this.state.guideHead.title}</div>\r\n          <div id=\"guideAuthor\">\r\n            <ProfilePic username={this.state.guideHead.author} test={true} key={this.state.guideHead.author} />\r\n          </div>\r\n          {this.state.user ? (\r\n            <VoteButtons\r\n              guide={this.state.guideHead}\r\n              user={this.state.username}\r\n            />\r\n          ) : (\r\n            <div className=\"guideVoteButtons\">\r\n              <div>\r\n                <span role=\"img\" aria-label=\"up\" className=\"up\">\r\n                  üëç\r\n                  {this.state.guideHead.scoreUp || 0}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <span role=\"img\" aria-label=\"down\" className=\"down\">\r\n                  üëé\r\n                  {this.state.guideHead.scoreDown || 0}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {!this.state.guideHead.image && this.state.guideHead.video && (\r\n            <YouTube\r\n              id=\"guideHeadVideo\"\r\n              videoId={getVidID(this.state.guideHead.video)}\r\n            ></YouTube>\r\n          )}\r\n          {this.state.guideHead.image && (\r\n            <img\r\n              id=\"guideHeadImg\"\r\n              src={this.state.guideHead.image}\r\n              alt={this.state.guideHead.title}\r\n            />\r\n          )}\r\n\r\n          <div id=\"guideHeadDesc\">{this.state.guideHead.description}</div>\r\n        </div>\r\n\r\n        <div id=\"guideSectionContainer\">\r\n          {this.state.guideSections.map((section) => (\r\n            <div className=\"guideSection\" key={section._id}>\r\n              <div className=\"guideSectionTitle\">{section.title}</div>\r\n\r\n              {!section.image && section.video && (\r\n                <YouTube\r\n                  className=\"guideSectionVideo\"\r\n                  videoId={getVidID(section.video)}\r\n                ></YouTube>\r\n              )}\r\n              {section.image && (\r\n                <img\r\n                  className=\"guideSectionImg\"\r\n                  src={section.image}\r\n                  alt={section.title}\r\n                />\r\n              )}\r\n\r\n              <div className=\"guideSectionDesc\">{section.description}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <CommentBox\r\n          parentID={this.id}\r\n          user={this.state.user}\r\n          username={this.state.username}\r\n          hide={false}\r\n          submit={false}\r\n          prompt=\"Leave a comment\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Guide;\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { v4 } from \"uuid\";\r\n\r\n\r\nclass FileUpload extends Component {\r\n  url=\"\";\r\n  componentDidMount(){\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n      this.url = \"http://localhost:8080/uploadImage\";\r\n      } else {\r\n        this.url = \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadImage\";\r\n      }\r\n  }\r\n  \r\n  state = {\r\n    file: null,\r\n    id:v4()\r\n  };\r\n\r\n  onChooseFile = (evt) => {\r\n    this.setState({\r\n      file: evt.target.files[0],\r\n    });\r\n    document.getElementById(this.state.id).classList = \"unsavedButton\"\r\n    document.getElementById(this.state.id).innerHTML = \"Save Image\"\r\n  };\r\n  \r\n  onUploadFile = () => {\r\n    let file = new FormData();\r\n    file.append(\"file\",this.state.file,this.state.file.name)\r\n    axios.post(this.url,file).then(res=>{\r\n      this.props.handler(res);\r\n      document.getElementById(this.state.id).classList = \"saveFileButton\"\r\n    document.getElementById(this.state.id).innerHTML = \"Image Saved\"\r\n    });\r\n  };\r\n\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"fileUpload\">\r\n        <input type=\"file\" accept=\"image/*\" onChange = {this.onChooseFile}></input>\r\n        <div className=\"saveFileButton\" onClick={this.onUploadFile} id={this.state.id}>Save Image</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default FileUpload;\r\n","import React, { Component } from \"react\";\r\nimport FileUpload from \"../components/fileUpload\";\r\nimport axios from \"axios\";\r\nimport { v4 } from \"uuid\";\r\n\r\nclass guideSection {\r\n  constructor(id) {\r\n    this.guideID = id;\r\n    this.sectionID = v4();\r\n    this.title = null;\r\n    this.description = null;\r\n    this.image = null;\r\n    this.video = null;\r\n  }\r\n}\r\n\r\nclass CreateGuideSection extends Component {\r\n  url = \"\";\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/uploadGuideSection\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideSection\";\r\n    }\r\n  }\r\n  state = {\r\n    guideSection: new guideSection(this.props.guideID),\r\n    submitID: v4(),\r\n  };\r\n\r\n  onSaveGuide = () => {\r\n    // console.log(this.state.guideSection);\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify(this.state.guideSection));\r\n    axios.post(this.url, formData).then((res) => {\r\n      let button = document.getElementById(this.state.submitID);\r\n      button.classList = \"saveButton\";\r\n      button.innerHTML = \"Saved\";\r\n    });\r\n  };\r\n\r\n  onAddSectionImg = (res) => {\r\n    this.setState((prevState) => ({\r\n      guideSection: {\r\n        ...prevState.guideSection,\r\n        image: res.data.Location,\r\n      },\r\n    }));\r\n\r\n    // console.log(this.state.guideSection);\r\n  };\r\n\r\n  onNotSaved = () => {\r\n    let button = document.getElementById(this.state.submitID);\r\n    button.classList = \"unsavedButton\";\r\n    button.innerHTML = \"Save Changes\";\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"guideCreatorSection\">\r\n        <div className=\"guideSectionCreatorLabel\">Add Section Title</div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"guideCreatorSectionInput\"\r\n          placeholder=\"Section Title\"\r\n          onChange={(e) => {\r\n            let title = e.target.value;\r\n            this.setState((prevState) => ({\r\n              guideSection: {\r\n                ...prevState.guideSection,\r\n                title: title,\r\n              },\r\n            }));\r\n            this.onNotSaved();\r\n          }}\r\n        ></input>\r\n        <div className=\"guideSectionCreatorLabel\">Add Section Description</div>\r\n        <textarea\r\n          type=\"text\"\r\n          className=\"guideCreatorSectionInput\"\r\n          placeholder=\"Description\"\r\n          onChange={(e) => {\r\n            let description = e.target.value;\r\n            this.setState((prevState) => ({\r\n              guideSection: {\r\n                ...prevState.guideSection,\r\n                description: description,\r\n              },\r\n            }));\r\n            this.onNotSaved();\r\n          }}\r\n        ></textarea>\r\n        <div className=\"guideCreatorSectionAddImage\">\r\n          <div className=\"guideSectionCreatorLabel\">[Optional] Add Image</div>\r\n          {this.state.guideSection.image ? <img\r\n              className=\"guideCreatorSectionAddImagePreview\"\r\n              src={this.state.guideSection.image}\r\n              width=\"100px\"\r\n              height=\"100px\"\r\n              alt=\"Preview\"\r\n            ></img> : \"\"}\r\n          <FileUpload handler={this.onAddSectionImg} />\r\n\r\n          <div className=\"guideSectionCreatorLabel\">[Optional] Add Video (takes place of image)</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"guideCreatorSectionInput\"\r\n            placeholder=\"Youtube URL\"\r\n            onChange={(e) => {\r\n              let url = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideSection: {\r\n                  ...prevState.guideSection,\r\n                  video: url,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></input>\r\n\r\n        </div>\r\n        <div\r\n          className=\"saveButton\"\r\n          id={this.state.submitID}\r\n          onClick={this.onSaveGuide}\r\n        >\r\n          Section Saved\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default CreateGuideSection;\r\n","import { v4 } from \"uuid\";\r\nimport React, { Component } from \"react\";\r\nimport FileUpload from \"../components/fileUpload\";\r\nimport CreateGuideSection from \"../components/guideSectionCreator\";\r\nimport axios from \"axios\";\r\nimport { session, getUsername } from \"../components/Authentication\";\r\n\r\nlet user = \"\";\r\nsession()\r\n  .then((val) => {\r\n    if (val) {\r\n      let { Value } = val.Attributes[2];\r\n      getUsername(Value).then((data) => {\r\n        user = data;\r\n      });\r\n    }\r\n  })\r\n  .catch((err) => console.log(err));\r\n\r\nclass guideHead {\r\n  constructor() {\r\n    this.guideID = v4();\r\n    this.author = user;\r\n    this.title = \"\";\r\n    this.description = \"\";\r\n    this.image = \"\";\r\n    this.video = \"\";\r\n    this.scoreUp = 0;\r\n    this.scoreDown = 0;\r\n  }\r\n}\r\n\r\nclass CreateGuide extends Component {\r\n  state = {\r\n    guideHead: new guideHead(),\r\n    guideSections: [],\r\n  };\r\n\r\n  url = \"\";\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/uploadGuideHead\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideHead\";\r\n    }\r\n    // console.log(this.url)\r\n  }\r\n\r\n  onSaveGuide = () => {\r\n    // console.log(this.state.guideHead);\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify(this.state.guideHead));\r\n    axios.post(this.url, formData).then((res) => {\r\n      let button = document.getElementById(\"saveHeadButton\");\r\n      button.classList = \"saveButton\";\r\n      button.innerHTML = \"Section Saved\";\r\n      document.getElementById(\"addSectionButtonHead\").style.display = \"block\";\r\n      document.getElementById(\"saveToolTip\").style.display = \"none\";\r\n    });\r\n  };\r\n\r\n  onAddHeadImg = (res) => {\r\n    this.setState((prevState) => ({\r\n      guideHead: {\r\n        ...prevState.guideHead,\r\n        image: res.data.Location,\r\n      },\r\n    }));\r\n\r\n    // console.log(this.state.guideHead);\r\n  };\r\n\r\n  onNotSaved = () => {\r\n    let button = document.getElementById(\"saveHeadButton\");\r\n    button.classList = \"unsavedButton\";\r\n    button.innerHTML = \"Save Changes\";\r\n  };\r\n\r\n  sectionIndex = 0;\r\n  addSection = () => {\r\n    this.setState((prevState) => ({\r\n      guideHead: {\r\n        ...prevState.guideHead,\r\n      },\r\n      guideSections: [\r\n        ...prevState.guideSections,\r\n        { key: this.sectionIndex, guideID: this.state.guideHead.guideID },\r\n      ],\r\n    }));\r\n    this.sectionIndex++;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"guideCreator\">\r\n        {/* <div className=\"id\">{this.state.guideHead.guideID}</div> */}\r\n        <div id=\"guideCreatorHead\">\r\n          <div className=\"guideCreatorLabel\">Add Title</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"guideCreatorHeadInput\"\r\n            placeholder=\"Title\"\r\n            onChange={(e) => {\r\n              // console.log(this.state.guideHead.author);\r\n              let title = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideHead: {\r\n                  ...prevState.guideHead,\r\n                  title: title,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></input>\r\n          <div className=\"guideCreatorLabel\">Add Description</div>\r\n          <textarea\r\n            type=\"text\"\r\n            className=\"guideCreatorHeadInput\"\r\n            placeholder=\"Description\"\r\n            onChange={(e) => {\r\n              let description = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideHead: {\r\n                  ...prevState.guideHead,\r\n                  description: description,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></textarea>\r\n          <div className=\"guideCreatorHeadAddImage\">\r\n            <div className=\"guideCreatorLabel\">[Optional] Add Image</div>\r\n            {this.state.guideHead.image ? (\r\n              <img\r\n                className=\"guideCreatorHeadAddImagePreview\"\r\n                src={this.state.guideHead.image}\r\n                width=\"100px\"\r\n                height=\"100px\"\r\n                alt=\"Preview\"\r\n              ></img>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <FileUpload handler={this.onAddHeadImg} />\r\n            <div className=\"guideCreatorLabel\">\r\n              [Optional] Add Video (takes place of image)\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"guideCreatorHeadInput\"\r\n              placeholder=\"Youtube URL\"\r\n              onChange={(e) => {\r\n                let url = e.target.value;\r\n                this.setState((prevState) => ({\r\n                  guideHead: {\r\n                    ...prevState.guideHead,\r\n                    video: url,\r\n                  },\r\n                }));\r\n                this.onNotSaved();\r\n              }}\r\n            ></input>\r\n          </div>\r\n          <div\r\n            className=\"saveButton\"\r\n            id=\"saveHeadButton\"\r\n            onClick={this.onSaveGuide}\r\n          >\r\n            Section Saved\r\n          </div>\r\n        </div>\r\n        <div className=\"guideCreatorSections\">\r\n          {this.state.guideSections.map((section) => (\r\n            <CreateGuideSection key={section.key} guideID={section.guideID} />\r\n          ))}\r\n        </div>\r\n        <div\r\n          className=\"addSectionButton\"\r\n          id=\"addSectionButtonHead\"\r\n          onClick={this.addSection}\r\n          style={{ display: \"none\" }}\r\n        >\r\n          Add Section\r\n        </div>\r\n        <div id=\"saveToolTip\">Save head section to add more</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default CreateGuide;\r\n","import React, { Component } from \"react\";\r\nimport { auth } from \"./Authentication\";\r\n\r\nclass LogInForm extends Component {\r\n  state = {\r\n    username: \"\",\r\n    password: \"\",\r\n    loading: false,\r\n  };\r\n\r\n  onSubmit = (e) => {\r\n    this.setState({\r\n      loading: true,\r\n    });\r\n    e.preventDefault();\r\n    auth(this.state.username, this.state.password)\r\n      .then((data) => {\r\n        // console.log(\"login\",data)\r\n        window.location.href = \"/\";\r\n      })\r\n      .catch((err) => {\r\n        // console.error(\"error\", err);\r\n        document.getElementById(\"errorLabel\").innerHTML = err.message;\r\n        this.setState({\r\n          loading: false,\r\n        });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"signUpForm\">\r\n        <div id=\"signInHead\">Log In</div>\r\n        <div className=\"errorLabel\" id=\"errorLabel\"></div>\r\n        <div className=\"signInLabel\">Username</div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"signUpFormInput\"\r\n          placeholder=\"Username\"\r\n          onChange={(e) => {\r\n            let username = e.target.value;\r\n            this.setState((prevState) => ({\r\n              ...prevState,\r\n              username: username,\r\n            }));\r\n          }}\r\n        ></input>\r\n        <div className=\"signInLabel\">Password</div>\r\n        <input\r\n          type=\"password\"\r\n          className=\"signUpFormInput\"\r\n          placeholder=\"Password\"\r\n          onChange={(e) => {\r\n            let password = e.target.value;\r\n            this.setState((prevState) => ({\r\n              ...prevState,\r\n              password: password,\r\n            }));\r\n          }}\r\n        ></input>\r\n        {this.state.loading ? (\r\n          <img\r\n            src=\"./assets/loading.gif\"\r\n            alt=\"Loading\"\r\n            className=\"loadingGif\"\r\n          ></img>\r\n        ) : (\r\n          <div id=\"submitButton\" onClick={this.onSubmit}>\r\n            Submit\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LogInForm;\r\n","import React, { Component } from \"react\";\r\nimport LogInForm from '../components/loginForm'\r\n\r\n\r\nclass LoginPage extends Component {\r\n\r\n  state = {};\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"loginPage\">\r\n        <div id=\"loginPageForm\">\r\n            <LogInForm />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginPage;\r\n","import { CognitoUserPool } from \"amazon-cognito-identity-js\";\r\nimport React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\n\r\n// const tools = require(\"../tools\");\r\n\r\nclass SignUpForm extends Component {\r\n  url = \"\";\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/createUser\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/createUser\";\r\n    }\r\n  }\r\n\r\n  userPool = new CognitoUserPool({\r\n    UserPoolId: \"us-east-2_r9mOSgn28\",\r\n    ClientId: \"4id2vq725vkn530cdcj355d0dt\",\r\n  });\r\n\r\n  state = {\r\n    email: \"\",\r\n    username: \"\",\r\n    password: \"\",\r\n    invalid: false,\r\n    loading: false,\r\n  };\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      loading: true,\r\n    });\r\n    this.userPool.signUp(\r\n      this.state.username,\r\n      this.state.password,\r\n      [\r\n        {\r\n          Name: \"email\",\r\n          Value: this.state.email,\r\n        },\r\n      ],\r\n      null,\r\n      (err, data) => {\r\n        if (err) {\r\n          // console.log(err.message);\r\n          document.getElementById(\"errorLabel\").innerHTML = \"Invalid email, username, or password\";\r\n          document.getElementById(\"errorLabelSubscript\").innerHTML = err.message;\r\n          this.setState({\r\n            loading: false,\r\n          });\r\n        } else {\r\n          // invalid = false;\r\n          let user = {\r\n            username: this.state.username,\r\n            email: this.state.email,\r\n          };\r\n          let formData = new FormData();\r\n          formData.append(\"file\", JSON.stringify(user));\r\n          axios.post(this.url, formData).then((res) => {\r\n            // console.log(data);\r\n            window.location.href = \"/\";\r\n          });\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"signUpForm\">\r\n        <div id=\"signInHead\">Log In</div>\r\n        <div className=\"errorLabel\" id=\"errorLabel\"></div>\r\n        <div className=\"errorLabelSubscript\" id=\"errorLabelSubscript\"></div>\r\n        <div className=\"signInLabel\">Email</div>\r\n        <input\r\n          type=\"email\"\r\n          className=\"signUpFormInput\"\r\n          placeholder=\"Email\"\r\n          onChange={(e) => {\r\n            let email = e.target.value;\r\n            this.setState((prevState) => ({\r\n              ...prevState,\r\n              email: email,\r\n            }));\r\n          }}\r\n        ></input>\r\n        <div className=\"signInLabel\">Username</div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"signUpFormInput\"\r\n          placeholder=\"Username\"\r\n          onChange={(e) => {\r\n            let username = e.target.value;\r\n            this.setState((prevState) => ({\r\n              ...prevState,\r\n              username: username,\r\n            }));\r\n          }}\r\n        ></input>\r\n        <div className=\"signInLabel\">Password</div>\r\n        <input\r\n          type=\"password\"\r\n          className=\"signUpFormInput\"\r\n          placeholder=\"Password\"\r\n          onChange={(e) => {\r\n            let password = e.target.value;\r\n            this.setState((prevState) => ({\r\n              ...prevState,\r\n              password: password,\r\n            }));\r\n          }}\r\n        ></input>\r\n        {this.state.loading ? (\r\n          <img\r\n            src=\"./assets/loading.gif\"\r\n            alt=\"Loading\"\r\n            className=\"loadingGif\"\r\n          ></img>\r\n        ) : (\r\n          <div id=\"submitButton\" onClick={this.onSubmit}>\r\n            Submit\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignUpForm;\r\n","import React, { Component } from \"react\";\r\nimport SignUpForm from '../components/signUpForm'\r\n\r\n\r\nclass SignUpPage extends Component {\r\n\r\n  state = {};\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"loginPage\">\r\n        <div id=\"loginPageForm\">\r\n            <SignUpForm />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignUpPage;\r\n","import React, { Component } from \"react\";\r\nimport FileUpload from \"../components/fileUpload\";\r\nimport axios from \"axios\";\r\nimport { v4 } from \"uuid\";\r\nimport { session } from \"./Authentication\";\r\n\r\nclass Section {\r\n  constructor(\r\n    id,\r\n    sectionID = v4(),\r\n    title = \"\",\r\n    description = \"\",\r\n    image = \"\",\r\n    video = \"\"\r\n  ) {\r\n    this.guideID = id;\r\n    this.sectionID = sectionID;\r\n    this.title = title;\r\n    this.description = description;\r\n    this.image = image;\r\n    this.video = video;\r\n  }\r\n}\r\n\r\nclass EditGuideSection extends Component {\r\n  state = {\r\n    guideSection: this.props.section.sectionID\r\n      ? this.props.section\r\n      : new Section(this.props.guideID),\r\n    submitID: v4(),\r\n    userToken: \"\",\r\n  };\r\n\r\n  url = \"\";\r\n  deleteUrl = \"\";\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/uploadGuideSection\";\r\n      this.deleteUrl = \"http://localhost:8080/deleteGuideSection\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideSection\";\r\n      this.deleteUrl =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/deleteGuideSection\";\r\n    }\r\n    console.log(this.state.guideSection.sectionID);\r\n\r\n    if (!this.props.section.sectionID) {\r\n      this.props.unsaved();\r\n    }\r\n    session()\r\n      .then((val) => {\r\n        if (val) {\r\n          let token = val.Session.idToken;\r\n          this.setState({\r\n            userToken: token,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  onSaveGuide = () => {\r\n    if (this.state.guideSection.title) {\r\n      // console.log(this.state.guideSection);\r\n      let formData = new FormData();\r\n      formData.append(\"file\", JSON.stringify(this.state.guideSection));\r\n      axios.post(this.url, formData).then((res) => {\r\n        let button = document.getElementById(this.state.submitID);\r\n        button.classList = \"saveButton\";\r\n        button.innerHTML = \"Saved\";\r\n      });\r\n      this.props.saved();\r\n    }\r\n  };\r\n\r\n  onAddSectionImg = (res) => {\r\n    this.setState((prevState) => ({\r\n      guideSection: {\r\n        ...prevState.guideSection,\r\n        image: res.data.Location,\r\n      },\r\n    }));\r\n\r\n    // console.log(this.state.guideSection);\r\n  };\r\n\r\n  onNotSaved = () => {\r\n    let button = document.getElementById(this.state.submitID);\r\n    button.classList = \"unsavedButton\";\r\n    button.innerHTML = \"Save Changes\";\r\n    this.props.unsaved();\r\n  };\r\n\r\n  onDeleteSection = () => {\r\n    let formData = new FormData();\r\n    formData.append(\r\n      \"file\",\r\n      JSON.stringify({\r\n        guideID: this.state.guideSection.guideID,\r\n        sectionID: this.state.guideSection._id,\r\n        token: this.state.userToken.jwtToken,\r\n      })\r\n    );\r\n    axios.post(this.deleteUrl, formData).then((res) => {this.props.saved()});\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"guideCreatorSection\">\r\n        <div className=\"deleteSection\" onClick={this.onDeleteSection}>\r\n          ‚úñ\r\n        </div>\r\n        <div className=\"guideSectionCreatorLabel\">Add Section Title</div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"guideCreatorSectionInput\"\r\n          placeholder=\"Section Title\"\r\n          value={this.state.guideSection.title}\r\n          onChange={(e) => {\r\n            let title = e.target.value;\r\n            this.setState((prevState) => ({\r\n              guideSection: {\r\n                ...prevState.guideSection,\r\n                title: title,\r\n              },\r\n            }));\r\n            this.onNotSaved();\r\n          }}\r\n        ></input>\r\n        <div className=\"guideSectionCreatorLabel\">Add Section Description</div>\r\n        <textarea\r\n          type=\"text\"\r\n          className=\"guideCreatorSectionInput\"\r\n          placeholder=\"Description\"\r\n          value={this.state.guideSection.description || \"\"}\r\n          onChange={(e) => {\r\n            let description = e.target.value;\r\n            this.setState((prevState) => ({\r\n              guideSection: {\r\n                ...prevState.guideSection,\r\n                description: description,\r\n              },\r\n            }));\r\n            this.onNotSaved();\r\n          }}\r\n        ></textarea>\r\n        <div className=\"guideCreatorSectionAddImage\">\r\n          <div className=\"guideSectionCreatorLabel\">[Optional] Add Image</div>\r\n          {this.state.guideSection.image ? (\r\n            <img\r\n              className=\"guideCreatorSectionAddImagePreview\"\r\n              src={this.state.guideSection.image}\r\n              width=\"100px\"\r\n              height=\"100px\"\r\n              alt=\"Preview\"\r\n            ></img>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <FileUpload handler={this.onAddSectionImg} />\r\n\r\n          <div className=\"guideSectionCreatorLabel\">\r\n            [Optional] Add Video (takes place of image)\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"guideCreatorSectionInput\"\r\n            placeholder=\"Youtube URL\"\r\n            value={this.state.guideSection.video || \"\"}\r\n            onChange={(e) => {\r\n              let url = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideSection: {\r\n                  ...prevState.guideSection,\r\n                  video: url,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></input>\r\n        </div>\r\n        <div\r\n          className=\"saveButton\"\r\n          id={this.state.submitID}\r\n          onClick={this.onSaveGuide}\r\n        >\r\n          Section Saved\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default EditGuideSection;\r\n","import { v4 } from \"uuid\";\r\nimport React, { Component } from \"react\";\r\nimport FileUpload from \"../components/fileUpload\";\r\nimport axios from \"axios\";\r\nimport { session, getUsername } from \"../components/Authentication\";\r\nimport EditGuideSection from \"../components/guideSectionEditor\";\r\n\r\nlet user = \"\";\r\nsession()\r\n  .then((val) => {\r\n    if (val) {\r\n      let { Value } = val.Attributes[2];\r\n      getUsername(Value).then((data) => {\r\n        user = data;\r\n      });\r\n    }\r\n  })\r\n  .catch((err) => console.log(err));\r\n\r\nclass guideHead {\r\n  constructor() {\r\n    this.guideID = v4();\r\n    this.author = user;\r\n    this.title = \"\";\r\n    this.description = \"\";\r\n    this.image = \"\";\r\n    this.video = \"\";\r\n    this.scoreUp = 0;\r\n    this.scoreDown = 0;\r\n  }\r\n}\r\nclass Section {\r\n  constructor() {\r\n    this.guideID = \"\";\r\n    this.sectionID = \"\";\r\n    this.title = \"\";\r\n    this.description = \"\";\r\n    this.image = \"\";\r\n    this.video = \"\";\r\n  }\r\n}\r\n\r\nclass EditGuide extends Component {\r\n  state = {\r\n    guideHead: new guideHead(),\r\n    guideSections: [],\r\n    unsaved: false,\r\n  };\r\n\r\n  id = new URLSearchParams(this.props.location.search).get(\"guideID\");\r\n  saveUrl = \"\";\r\n  getUrl = \"\";\r\n  componentDidMount() {\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.saveUrl = \"http://localhost:8080/uploadGuideHead\";\r\n      this.getUrl = \"http://localhost:8080/getGuide?guideId=\" + this.id;\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getGuide?guideId=\" +\r\n        this.id;\r\n      this.getUrl =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadGuideHead\";\r\n    }\r\n\r\n    this.getSections();\r\n    // console.log(this.state.guideSections);\r\n  }\r\n\r\n  getSections() {\r\n    // console.log(this.url);\r\n    fetch(this.getUrl)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        // console.log(data);\r\n        this.setState({\r\n          guideHead: data[0],\r\n          guideSections: data[1],\r\n        });\r\n        // console.log(this.state.guideSections);\r\n      });\r\n  }\r\n\r\n  onSaveGuide = () => {\r\n    // console.log(this.state.guideHead);\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify(this.state.guideHead));\r\n    axios.post(this.saveUrl, formData).then((res) => {\r\n      let button = document.getElementById(\"saveHeadButton\");\r\n      button.classList = \"saveButton\";\r\n      button.innerHTML = \"Section Saved\";\r\n      this.setState({\r\n        unsaved: false,\r\n      });\r\n    });\r\n  };\r\n\r\n  onAddHeadImg = (res) => {\r\n    this.setState((prevState) => ({\r\n      guideHead: {\r\n        ...prevState.guideHead,\r\n        image: res.data.Location,\r\n      },\r\n    }));\r\n\r\n    // console.log(this.state.guideHead);\r\n  };\r\n\r\n  onNotSaved = () => {\r\n    let button = document.getElementById(\"saveHeadButton\");\r\n    button.classList = \"unsavedButton\";\r\n    button.innerHTML = \"Save Changes\";\r\n    this.setState({\r\n      unsaved: true,\r\n    });\r\n    // console.log(this.state);\r\n  };\r\n\r\n  onSectionNotSaved = () => {\r\n    this.setState({\r\n      unsaved: true,\r\n    });\r\n  };\r\n  onSectionSaved = () => {\r\n    this.setState({\r\n      unsaved: false,\r\n    });\r\n    this.getSections();\r\n  };\r\n  sectionIndex = this.state.guideSections.length;\r\n  addSection = () => {\r\n    this.sectionIndex++;\r\n    // console.log(this.sectionIndex);\r\n    this.setState(\r\n      (prevState) => ({\r\n        guideHead: {\r\n          ...prevState.guideHead,\r\n        },\r\n        guideSections: [...prevState.guideSections, new Section()],\r\n      }),\r\n      () => {\r\n        // console.log(this.state.guideSections);\r\n      }\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"guideCreator\">\r\n        {/* <div className=\"id\">{this.state.guideHead.guideID}</div> */}\r\n        <div id=\"guideCreatorHead\">\r\n          <div className=\"guideCreatorLabel\">Add Title</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"guideCreatorHeadInput\"\r\n            placeholder=\"Title\"\r\n            value={this.state.guideHead.title}\r\n            onChange={(e) => {\r\n              let title = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideHead: {\r\n                  ...prevState.guideHead,\r\n                  title: title,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></input>\r\n          <div className=\"guideCreatorLabel\">Add Description</div>\r\n          <textarea\r\n            type=\"text\"\r\n            className=\"guideCreatorHeadInput\"\r\n            placeholder=\"Description\"\r\n            value={this.state.guideHead.description}\r\n            onChange={(e) => {\r\n              let description = e.target.value;\r\n              this.setState((prevState) => ({\r\n                guideHead: {\r\n                  ...prevState.guideHead,\r\n                  description: description,\r\n                },\r\n              }));\r\n              this.onNotSaved();\r\n            }}\r\n          ></textarea>\r\n          <div className=\"guideCreatorHeadAddImage\">\r\n            <div className=\"guideCreatorLabel\">[Optional] Add Image</div>\r\n            {this.state.guideHead.image ? (\r\n              <img\r\n                className=\"guideCreatorHeadAddImagePreview\"\r\n                src={this.state.guideHead.image}\r\n                width=\"100px\"\r\n                height=\"100px\"\r\n                alt=\"Preview\"\r\n              ></img>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <FileUpload handler={this.onAddHeadImg} />\r\n            <div className=\"guideCreatorLabel\">\r\n              [Optional] Add Video (takes place of image)\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"guideCreatorHeadInput\"\r\n              placeholder=\"Youtube URL\"\r\n              value={this.state.guideHead.video}\r\n              onChange={(e) => {\r\n                let url = e.target.value;\r\n                this.setState((prevState) => ({\r\n                  guideHead: {\r\n                    ...prevState.guideHead,\r\n                    video: url,\r\n                  },\r\n                }));\r\n                this.onNotSaved();\r\n              }}\r\n            ></input>\r\n          </div>\r\n          <div\r\n            className=\"saveButton\"\r\n            id=\"saveHeadButton\"\r\n            onClick={this.onSaveGuide}\r\n          >\r\n            Section Saved\r\n          </div>\r\n        </div>\r\n        <div className=\"guideCreatorSections\">\r\n          {this.state.guideSections.map((section) => (\r\n            <EditGuideSection\r\n              key={section.sectionID ? section.sectionID : this.sectionIndex}\r\n              section={section}\r\n              guideID={this.id}\r\n              unsaved={this.onSectionNotSaved}\r\n              saved={this.onSectionSaved}\r\n            />\r\n          ))}\r\n        </div>\r\n        {this.state.unsaved ? (\r\n          <div className=\"addSectionButton\">\r\n            Save other sections to add more\r\n          </div>\r\n        ) : (\r\n          <div className=\"addSectionButton\" onClick={this.addSection}>\r\n            Add Section\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default EditGuide;\r\n","import React, { Component } from \"react\";\r\nimport CommentBox from \"../components/CommentBox\";\r\nimport { session, getUsername } from \"../components/Authentication\";\r\n\r\nclass Board extends Component {\r\n  state = {\r\n    user: false,\r\n    username: \"\",\r\n    searchValue:\"\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    session()\r\n      .then((val) => {\r\n        if (val) {\r\n          // console.log(\"USER\",val);\r\n          let { Value } = val.Attributes[2];\r\n          getUsername(Value).then((data) => {\r\n            this.setState({\r\n              username: data,\r\n              user: true,\r\n            });\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n      // console.log(\"Board      ----->\",this.props.searchValue)\r\n      this.setState({\r\n        searchValue: this.props.searchValue ? this.props.searchValue : \"\",\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"board\">\r\n        <CommentBox\r\n          parentID={this.id}\r\n          user={this.state.user}\r\n          username={this.state.username}\r\n          hide={false}\r\n          submit={false}\r\n          sortNew={true}\r\n          permaDelete = {true}\r\n          prompt=\"Start a discussion\"\r\n          searchValue={this.props.searchValue}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Board;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport socketIOClient from 'socket.io-client'\r\nconst tools = require(\"../tools\");\r\n\r\n\r\n\r\nlet url = \"\";\r\nif (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n  url = \"http://localhost:8080/\";\r\n} else {\r\n  url =\r\n    \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/\";\r\n}\r\n\r\nconst ChatTools = (roomID, currentUser) => {\r\n    // console.log(roomID)\r\n    const [messages, updateMessages] = useState([]);\r\n    const ref = useRef();\r\n    useEffect(()=>{\r\n    \r\n        ref.current = socketIOClient(url,{\r\n            query:{roomID:roomID}\r\n        });\r\n\r\n\r\n        ref.current.on(\"newChatMessage\", (message)=>{\r\n            let incoming = {\r\n                ...message,\r\n                isCurrentUser:message.senderID === currentUser,\r\n            };\r\n            // console.log(incoming)\r\n            updateMessages((messages)=>[...messages, incoming]);\r\n            \r\n            let newLog = messages;\r\n            newLog.push(incoming)\r\n\r\n            // console.log(newLog)\r\n\r\n            tools.saveChatLog(roomID, newLog);\r\n\r\n        });\r\n\r\n        return () =>{\r\n            ref.current.disconnect();\r\n        }\r\n    }, [roomID, currentUser])\r\n    const send = (message) =>{\r\n        ref.current.emit(\"newChatMessage\",{\r\n            body:message,\r\n            senderID:currentUser\r\n        });\r\n      \r\n    };\r\n    return {messages, send}\r\n};\r\n\r\nexport default ChatTools;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ChatTools from \"./ChatTools\";\r\nimport ProfilePic from \"./ProfilePic\";\r\n\r\n\r\nconst ChatBox = (props) => {\r\n  const { messages, send } = ChatTools(props.roomID, props.currentUser);\r\n  const [newMessage, updateSendMessage] = useState([]);\r\n  const messagesBottomRef = useRef(null);\r\n\r\n  const onMessageChange = (e) => {\r\n    //   e.preventDefault();\r\n    updateSendMessage(e.target.value);\r\n  };\r\n\r\n  const onSendMessage = () => {\r\n    if (newMessage && typeof newMessage === \"string\") {\r\n      send(newMessage);\r\n      updateSendMessage(\"\");\r\n      document.getElementById(\"input\").value = \"\";\r\n\r\n    }\r\n  };\r\n\r\n  const autoScroll = () => {\r\n    messagesBottomRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    messages.unshift(...props.prevLogs.filter((message) => message !== \"\"));\r\n    // console.log(\"Prev Logs\",props.prevLogs)\r\n  }, []);\r\n  useEffect(() => {\r\n    // if (messages.length > 0) {\r\n      // console.log(messages);\r\n    // }\r\n    autoScroll();\r\n    // setTimeout(()=>{\r\n    //   autoScroll();\r\n    // }, 5000)\r\n  }, [messages, props.roomID, props.prevLogs]);\r\n\r\n  return (\r\n    <div className=\"chatBox\">\r\n      <div className=\"chatBoxMessages\">\r\n        {messages.map((message, i) => (\r\n          <div\r\n            className={\r\n              message.senderID === props.currentUser\r\n                ? \"chatMessage self\"\r\n                : \"chatMessage\"\r\n            }\r\n            key={i}\r\n          >\r\n            {/* <ProfilePic username={message.senderID}></ProfilePic> */}\r\n            <Link to={\"/profile?user=\" + message.senderID}><div className=\"messageUsername\">{message.senderID}: </div></Link>\r\n            {message.body}\r\n          </div>\r\n        ))}\r\n        <div id=\"messagesBottom\" ref={messagesBottomRef}></div>\r\n      </div>\r\n      <div className=\"chatBoxInputBox\">\r\n        <input\r\n          type=\"text\"\r\n          onChange={onMessageChange}\r\n          placeholder=\"send message...\"\r\n          className=\"chatBoxInput\"\r\n          id=\"input\"\r\n        ></input>\r\n        <button onClick={onSendMessage}>Send</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBox;\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  session,\r\n  getUserDataFromUsername,\r\n  getUsername,\r\n} from \"../components/Authentication\";\r\nimport FileUpload from \"../components/fileUpload\";\r\nimport axios from \"axios\";\r\nimport ChatBox from \"../components/ChatBox\";\r\nconst tools = require(\"../tools\");\r\n\r\nclass Profile extends Component {\r\n  id = new URLSearchParams(this.props.location.search).get(\"user\");\r\n  defaultUser = {\r\n    username: \"User Not Found\",\r\n    email: \"\",\r\n    image: \"\",\r\n  };\r\n  state = {\r\n    user: \"\",\r\n    currentUser: \"\",\r\n    id: \"\",\r\n    prevLogs: [\"\"],\r\n  };\r\n  url = \"\";\r\n  listen = \"\";\r\n\r\n  componentDidMount() {\r\n    // console.log(\"PROFILE ID\", this.id);\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      this.url = \"http://localhost:8080/createUser\";\r\n    } else {\r\n      this.url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/createUser\";\r\n    }\r\n    this.listen = this.props.history.listen((location, action) => {\r\n      this.setID(location);\r\n      window.location.reload();\r\n    });\r\n    this.setID();\r\n    tools.setTransition(false); \r\n  }\r\n  \r\n  componentWillUnmount() {\r\n    tools.setTransition(true); \r\n    this.listen();\r\n  }\r\n\r\n  getLogs = async () => await new Promise((resolve,reject)=>{\r\n    let url = \"\";\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n      url = \"http://localhost:8080/getChatLog\";\r\n    } else {\r\n      url =\r\n        \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/getChatLog\";\r\n    }\r\n    let formData = new FormData();\r\n    formData.append(\r\n      \"file\",\r\n      JSON.stringify({\r\n        roomID: this.state.id,\r\n      })\r\n    );\r\n    axios.post(url, formData).then((val) => {\r\n      // console.log(val.data)\r\n      this.setState({\r\n        prevLogs: val.data.chatLog,\r\n      }, ()=>{\r\n        resolve();\r\n        // console.log(this.state.prevLogs)\r\n      });\r\n    }).catch((err)=>{\r\n      reject(err)\r\n    });\r\n  });\r\n\r\n  setID(location = this.props.location) {\r\n    // console.log(location)\r\n    // console.log(\"URL ID: \", new URLSearchParams(location.search).get(\"user\"));\r\n    this.setState(\r\n      {\r\n        id: new URLSearchParams(location.search).get(\"user\"),\r\n      },\r\n      () => {\r\n        this.getLogs().then(()=>{\r\n          this.getUserData();\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  getUserData() {\r\n    // console.log(\"ID: \", this.state.id);\r\n    getUserDataFromUsername(this.state.id).then((user) => {\r\n      this.setState({\r\n        user: user || this.defaultUser,\r\n      });\r\n      session()\r\n        .then((val) => {\r\n          if (val) {\r\n            let { Value } = val.Attributes[2];\r\n            getUsername(Value).then((currentUser) => {\r\n              this.setState({\r\n                currentUser: currentUser,\r\n              });\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    });\r\n\r\n  }\r\n\r\n  onImageChange = (res) => {\r\n    let user = {\r\n      username: this.state.user.username,\r\n      email: this.state.user.email,\r\n      image: res.data.Location,\r\n    };\r\n    let formData = new FormData();\r\n    formData.append(\"file\", JSON.stringify(user));\r\n    axios.post(this.url, formData).then((res) => {\r\n      this.setState({\r\n        user: res.data,\r\n      });\r\n    });\r\n  };\r\n\r\n  defaultImage =\r\n    \"https://guia-images.s3-us-west-1.amazonaws.com/Full-Green-Tree-984x1024.png\";\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"profileContainer\">\r\n        <div id=\"profile\">\r\n          <img\r\n            className=\"profileImage\"\r\n            src={this.state.user.image || this.defaultImage}\r\n            alt={this.state.user.username}\r\n          ></img>\r\n          {this.state.currentUser === this.id ? (\r\n            <FileUpload handler={this.onImageChange} />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <div className=\"profileUsername\">{this.state.user.username}</div>\r\n          <div className=\"profileEmail\">{this.state.user.email}</div>\r\n        </div>\r\n        <ChatBox\r\n          roomID={this.state.id}\r\n          currentUser={this.state.currentUser}\r\n          prevLogs={this.state.prevLogs}\r\n          key={this.state.prevLogs.length}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Profile;\r\n","import \"./App.scss\";\r\nimport React, { Component } from \"react\";\r\nimport { Link, Route, Switch, withRouter } from \"react-router-dom\";\r\nimport Home from \"./pages/Home.jsx\";\r\nimport Guide from \"./pages/Guide\";\r\nimport CreateGuide from \"./pages/CreateGuide\";\r\nimport LoginPage from \"./pages/LoginPage\";\r\nimport SignUpPage from \"./pages/SignUpPage\";\r\nimport EditGuide from \"./pages/EditGuide\";\r\nimport { logout, session, getUsername } from \"./components/Authentication\";\r\nimport Board from \"./pages/Board\";\r\nimport Profile from \"./pages/Profile\";\r\n\r\n// import {\r\n//   BrowserRouter as Router,\r\n//   Switch,\r\n//   Route,\r\n//   Link\r\n// } from \"react-router-dom\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: false,\r\n      username: \"\",\r\n      searchValue: \"\",\r\n    };\r\n    this.onSearch = this.onSearch.bind(this);\r\n  }\r\n  hide(e) {\r\n    this.setState({\r\n      homeLinks: true,\r\n    });\r\n  }\r\n\r\n  // //RESET STATE ON BACK\r\n  // //or on load ... i think?\r\n  // componentDidMount(){\r\n  //   window.onpopstate = () =>{\r\n  //     this.setState({\r\n  //       test:true\r\n  //     })\r\n  //   }\r\n  // }\r\n\r\n  componentDidMount() {\r\n    session()\r\n      .then((val) => {\r\n        if (val) {\r\n          // console.log(\"USER\",val);\r\n          let { Value } = val.Attributes[2];\r\n          getUsername(Value).then((data) => {\r\n            // console.log(data);\r\n            this.setState({\r\n              username: data,\r\n            });\r\n          });\r\n          this.setState({\r\n            user: true,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n\r\n    // console.log(this.props.location);\r\n  }\r\n\r\n  onSearch(e) {\r\n    this.setState(\r\n      {\r\n        searchValue: e.target.value,\r\n      },\r\n      () => {\r\n        // console.log(\"App       ----->\",this.state.searchValue);\r\n      }\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <div id=\"container\">\r\n        <div id=\"mainSidebar\">\r\n          <Link to=\"/\">\r\n            <img src=\"./assets/GuiaLogo1.svg\" alt=\"Logo\" id=\"mainLogo\"></img>\r\n          </Link>\r\n          {/* <div> */}\r\n          {this.props.location.pathname === \"/\" \r\n          //|| this.props.location.pathname === \"/board\"\r\n          ? (\r\n            <input\r\n              id=\"searchBar\"\r\n              type=\"text\"\r\n              onChange={this.onSearch}\r\n              placeholder=\"Search\"\r\n            ></input>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {/* </div> */}\r\n          {this.state.user ? (\r\n            <div className=\"signedInButtons\">\r\n              <Link to=\"/createGuide\">\r\n                <div className=\"sidebarButton bold\">Create Guide</div>\r\n              </Link>\r\n              <Link to=\"/board\">\r\n                <div className=\"sidebarButton bold\">Community Board</div>\r\n              </Link>\r\n              <Link to={\"/profile?user=\" + this.state.username}>\r\n                <div className=\"sidebarButton bold\">Profile</div>\r\n              </Link>\r\n              <div className=\"sidebarButton signOutButton\" onClick={logout}>\r\n                Sign Out\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"signInButtons\">\r\n              <Link to=\"/login\">\r\n                <div className=\"sidebarButton bold\">Login</div>\r\n              </Link>\r\n              <Link to=\"/signup\">\r\n                <div className=\"sidebarButton bold\">Sign Up</div>\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div id=\"mainContainer\">\r\n          <Switch>\r\n            {/* <Route\r\n              path=\"/testUpload\"\r\n              render={(props) => <FileUpload {...props}></FileUpload>}\r\n            ></Route> */}\r\n            <Route\r\n              path=\"/profile\"\r\n              render={(props) => <Profile {...props} />}\r\n            ></Route>\r\n\r\n            <Route\r\n              path=\"/edit\"\r\n              render={(props) => <EditGuide {...props} />}\r\n            ></Route>\r\n            <Route\r\n              path=\"/login\"\r\n              render={(props) => <LoginPage {...props}></LoginPage>}\r\n            ></Route>\r\n            <Route\r\n              path=\"/signup\"\r\n              render={(props) => <SignUpPage {...props}></SignUpPage>}\r\n            ></Route>\r\n            <Route\r\n              path=\"/createGuide\"\r\n              render={(props) => <CreateGuide {...props}></CreateGuide>}\r\n            ></Route>\r\n            <Route\r\n              path=\"/guide\"\r\n              render={(props) => <Guide {...props}></Guide>}\r\n            ></Route>\r\n            <Route\r\n              path=\"/board\"\r\n              render={(props) => (\r\n                <Board {...props} searchValue={this.state.searchValue}/>\r\n              )}\r\n            ></Route>\r\n\r\n            <Route\r\n              path=\"/\"\r\n              render={(props) => (\r\n                <Home\r\n                  {...props}\r\n                  searchValue={this.state.searchValue}\r\n                  Hide={(e) => this.hide(e)}\r\n                ></Home>\r\n              )}\r\n            ></Route>\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n// import { Router } from 'react-router-dom';\r\nimport { BrowserRouter} from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// const cognito = require('amazon-cognito-identity-js')\r\nimport axios from \"axios\";\r\n\r\n const getVidID = (url) => {\r\n  let cleanUrl = url.replace(\"https://\", \"\").trim();\r\n\r\n  if (cleanUrl.includes(\"youtu.be\")) {\r\n    let splitUrl = cleanUrl.split(\"/\");\r\n    return splitUrl[1];\r\n  } else {\r\n    let splitUrl = cleanUrl.split(\"?v=\");\r\n    let cleanSplitUrl = splitUrl[1].split(\"&\");\r\n    return cleanSplitUrl[0];\r\n  }\r\n};\r\n\r\nconst deleteGuide = (id, token) => {\r\n  let url = \"\";\r\n  if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n    url = \"http://localhost:8080/deleteGuide?guideId=\" + id + \"&token=\" + token;\r\n  } else {\r\n    url =\r\n      \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/deleteGuide?guideId=\" +\r\n      id +\r\n      \"&token=\" +\r\n      token;\r\n  }\r\n  // window.location.href('/')\r\n  fetch(url).then((res) => {\r\n    // console.log(res);\r\n  });\r\n};\r\n\r\nlet transitioning = false;\r\nconst setTransition = (isTransitioning)=>{\r\n  transitioning = isTransitioning;\r\n  // console.log(transitioning)\r\n}\r\n\r\n\r\nconst saveChatLog = (roomID, chatLog) => {\r\n  // console.log(\"Transitioning: \",transitioning);\r\n  let url = \"\";\r\n  if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n    url = \"http://localhost:8080/uploadChatLog\";\r\n  } else {\r\n    url =\r\n      \"http://guiabackend-env.eba-u9xxwbnm.us-west-1.elasticbeanstalk.com/uploadChatLog\";\r\n  }\r\n\r\n  // console.log(roomID, chatLog);\r\n\r\n  let formData = new FormData();\r\n  formData.append(\r\n    \"file\",\r\n    JSON.stringify({\r\n      roomID: roomID,\r\n      chatLog: chatLog,\r\n    })\r\n  );\r\n  axios.post(url, formData).then();\r\n\r\n};\r\n\r\n\r\nexport {getVidID, deleteGuide, saveChatLog, setTransition}"],"sourceRoot":""}